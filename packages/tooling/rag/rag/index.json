{
  "generatedAt": "2026-02-18T14:53:31.218Z",
  "files": [
    {
      "path": "docs/workflows.md",
      "content": "# Workflows (n8n)\n\n## Exported files\n- `packages/tooling/workflows/exported/ingest-users.json`\n- `packages/tooling/workflows/exported/list-users.json`\n- `packages/tooling/workflows/exported/clear-users.json`\n\n## Import steps\n1. Start n8n (`n8n`) and open `http://localhost:5678`.\n2. Use **Import from file** and import each JSON export.\n3. Configure `postgres-local` credentials in every Postgres node.\n4. Activate workflows.\n\n## Expected webhook paths\n- Ingest: `POST /webhook/ingest-users`\n- List: `GET /webhook/list-users`\n- Clear: `POST /webhook/clear-users`\n\n## Notes\n- `clear-users` runs `TRUNCATE TABLE users RESTART IDENTITY;`.\n- Keep credentials inside n8n; do not commit secrets.\n"
    },
    {
      "path": "docs/spec/README.md",
      "content": "# Local Spec Files (do not commit)\n\nPlace the take-home test PDF here as:\n- docs/spec/test-spec.pdf\n\nThis file is intentionally ignored by git.\n"
    },
    {
      "path": "docs/api.md",
      "content": "# API\n\n(TODO)\n"
    },
    {
      "path": "docs/agentic-workflow.md",
      "content": "# Agentic Workflow\n\n## Purpose\nKeep issue delivery fast and reproducible by checking local docs context before writing code.\n\n## Standard loop\n1. Choose issue in `.github/issues/`.\n2. Run:\n```bash\nbun run rag:search \"<issue keywords>\"\n```\n3. Create feature branch.\n4. Implement only the issue scope.\n5. Update evidence file for the milestone.\n6. Run validations (`test`, `lint`, `typecheck`).\n7. Open PR to `develop`.\n\n## Example\nFor issue `M2-03`:\n```bash\nbun run rag:search \"M2-03 n8n execute clear\"\ngit checkout -b feature/M2-03-n8n-forward-ingest\n```\n\nUse top hits to avoid duplicating existing decisions from `docs/` and issue files.\n"
    },
    {
      "path": "docs/architecture.md",
      "content": "# Architecture\n\n## Scope\nFullstack pipeline with Bun + Fastify backend, n8n workflows, PostgreSQL persistence, and React frontend.\n\n## End-to-end flow\n1. Frontend calls backend `POST /users/execute`.\n2. Backend fetches encrypted payload from secure endpoint.\n3. Backend decrypts payload using AES-256-GCM.\n4. Backend forwards decrypted users to n8n ingest webhook.\n5. n8n writes users to PostgreSQL and returns persisted rows.\n6. Frontend renders rows in a `<table>` without reloading.\n7. Frontend `POST /users/clear` triggers n8n clear webhook (TRUNCATE) and clears table state.\n\n## Secure endpoint details (from spec)\n- Endpoint URL: `https://n8n-apps.nlabshealth.com/webhook/data-5dYbrVSlMVJxfmco`\n- Method: `GET` (assumption based on webhook-style data endpoint; validate during runtime)\n- Response: encrypted data using AES-256-GCM.\n- Spec note: response includes initialization vectors and secret keys for decryption.\n\n## Encrypted payload contract\nThe PDF defines AES-256-GCM usage but does not publish exact JSON field names or encodings.\n\n### Required fields expected by decryptor\n- `ciphertext` (encrypted bytes)\n- `iv` (initialization vector)\n- `authTag` (authentication tag)\n- `key` (256-bit key)\n\n### Encoding assumptions\n- Default parser strategy: try base64 first, then hex when needed.\n- Decryptor must fail closed for invalid/missing fields or auth failure.\n\n## User model and mapping\nExpected user fields (spec DB contract):\n- `nome`\n- `email`\n- `phone`\n\nOptional during pipeline:\n- `id` generated by PostgreSQL.\n\n## n8n webhooks behavior\n- `ingest-users` (POST): receive decrypted users, persist to DB, return persisted users list.\n- `list-users` (GET): return persisted users list.\n- `clear-users` (POST): `TRUNCATE users` and return `{ cleared: true }`.\n\n## PostgreSQL schema (exact spec)\n```sql\nCREATE TABLE users (\n  id SERIAL PRIMARY KEY,\n  nome VARCHAR(128) NOT NULL,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  phone VARCHAR(20) NOT NULL\n);\n```\n\n## Spec Checklist\n- Backend in Node/Fastify with REST endpoints.\n- AES-256-GCM decryption implemented in backend.\n- Decrypted data forwarded to n8n webhook.\n- n8n persists in PostgreSQL and returns persisted data.\n- Frontend has `<table>` with users from pipeline.\n- Frontend has `Executar` and `Limpar` buttons.\n- UI updates dynamically without full page reload.\n- Responsive layout for different devices.\n- Cloud deployment for frontend and backend with public URLs.\n\n## Explicit assumptions\n- Secure endpoint payload field names/encodings are inferred at runtime because PDF omits exact format.\n- n8n webhook paths (`ingest-users`, `list-users`, `clear-users`) are implementation-defined for this repo.\n- Local setup remains Docker-optional only.\n"
    },
    {
      "path": "docs/evidence/M4-deploy.md",
      "content": "# Evidence: M4-deploy.md\n\n## M4-01 - backend deployment\n\n### Platform\n- `PENDING` (Railway/Render/Fly)\n\n### Backend URL\n- `PENDING`\n\n### Env var names configured\n- `API_PORT`\n- `API_HOST`\n- `CORS_ORIGIN`\n- `SECURE_ENDPOINT_URL`\n- `N8N_WEBHOOK_INGEST_URL`\n- `N8N_WEBHOOK_LIST_URL`\n- `N8N_WEBHOOK_CLEAR_URL`\n- `HTTP_TIMEOUT_MS`\n- `HTTP_RETRIES`\n\n### Curl proof placeholders\n```bash\ncurl -i https://<backend-url>/health\ncurl -i -X POST https://<backend-url>/users/execute -H 'content-type: application/json' -d '{}'\ncurl -i -X POST https://<backend-url>/users/clear -H 'content-type: application/json' -d '{}'\n```\n\n## M4-02 - frontend deployment\n\n### Platform\n- `PENDING` (Vercel/Netlify)\n\n### Frontend URL\n- `PENDING`\n\n### Backend URL consumed by frontend\n- configured in `packages/frontend/web/runtime-config.js`\n\n### E2E proof placeholders\n- `[ ] front online screenshot`\n- `[ ] execute flow screenshot`\n- `[ ] clear flow screenshot`\n\n## M4-03 - final reviewer pack\n\n### Reviewer quickcheck\n1. Open frontend URL.\n2. Click `Executar` and verify dynamic table population.\n3. Click `Limpar` and verify table clears without reload.\n4. Call backend `/health` and confirm `200`.\n\n### Remaining external actions\n- Publish backend and frontend URLs.\n- Attach screenshots and curl outputs above.\n\n### Notes\n- Deployment and GitHub publishing are pending due network restrictions in the current sandbox.\n"
    },
    {
      "path": "docs/evidence/M1-db.md",
      "content": "# Evidence: M1-db.md\n\n## Commands used\n```bash\npsql \"postgresql://hw_user:hw_pass@localhost:5432/hw_db\" -f infra/sql/users.sql\npsql \"postgresql://hw_user:hw_pass@localhost:5432/hw_db\" -c \"\\\\d users\"\npsql \"postgresql://hw_user:hw_pass@localhost:5432/hw_db\" -c \"SELECT count(*) FROM users;\"\n```\n\n## Expected outputs\n\n### `\\d users`\n```text\n                        Table \"public.users\"\n Column |          Type          | Collation | Nullable |              Default\n--------+------------------------+-----------+----------+-----------------------------------\n id     | integer                |           | not null | nextval('users_id_seq'::regclass)\n nome   | character varying(128) |           | not null |\n email  | character varying(255) |           | not null |\n phone  | character varying(20)  |           | not null |\nIndexes:\n    \"users_pkey\" PRIMARY KEY, btree (id)\n    \"users_email_key\" UNIQUE CONSTRAINT, btree (email)\n```\n\n### `SELECT count(*) FROM users;`\n```text\n count\n-------\n     0\n(1 row)\n```\n"
    },
    {
      "path": "docs/evidence/M0-policy.md",
      "content": "# Evidence: M0-policy.md\n\n(TODO)\n"
    },
    {
      "path": "docs/evidence/M5-rag.md",
      "content": "# Evidence: M5-rag.md\n\n## M5-01 - local rag-like index/search\n\n### Commands executed\n```bash\nbun run rag:index\nbun run rag:search \"AES-256-GCM\"\nbun run rag:search \"TRUNCATE users\"\n```\n\n### Observed outputs\n- Index generated at `packages/tooling/rag/rag/index.json`\n- Indexed files: `33`\n- Search returns ranked matches with:\n  - score\n  - file path\n  - content snippet\n\nExample hits:\n- `docs/architecture.md`\n- `docs/evidence/M2-crypto.md`\n- `.github/issues/M2-02-secure-endpoint-fetch-and-decrypt-aes-256-gcm.md`\n\n## M5-02 - workflow documentation\n- Updated `AGENTS.md` to require `bun run rag:search` before coding each issue.\n- Added `docs/agentic-workflow.md` with concise step-by-step and example commands.\n\n### Notes\n- local-only implementation\n- no external APIs or embeddings\n- run `rag:index` before `rag:search` to refresh index\n"
    },
    {
      "path": "docs/evidence/M3-ui.md",
      "content": "# Evidence: M3-ui.md\n\n## M3-01 - React UI table and layout\n- Implemented responsive frontend page in `packages/frontend/web`.\n- UI contains:\n  - `<table>` with `nome/email/phone`\n  - button `Executar`\n  - button `Limpar`\n- Dynamic updates happen without page reload.\n\n## M3-02 - API integration\n- `Executar` calls `POST /users/execute` and updates table state from backend response.\n- `Limpar` calls `POST /users/clear` and clears table on success.\n- Loading and error states implemented in UI.\n- Buttons are disabled while loading to avoid flicker and duplicate requests.\n\n## M3-03 - tests\n- Added deterministic frontend transition tests:\n  - execute populates table state\n  - clear empties state\n  - loading disables actions\n- Added Jest bootstrap placeholder command (`test:jest`) for environments with package registry access.\n\n## Commands\n```bash\ncd packages/frontend/web\nbun run dev\nbun run test\nbun run test:jest\n```\n\n## E2E checklist\n- [ ] start backend and n8n\n- [ ] click `Executar` and verify rows rendered\n- [ ] click `Limpar` and verify table empty\n- [ ] repeat flow without page reload\n\n## Screenshot placeholders\n- `[ ] desktop layout after execute`\n- `[ ] desktop layout after clear`\n- `[ ] mobile layout`\n"
    },
    {
      "path": "docs/evidence/M0-setup.md",
      "content": "# Evidence: M0-setup.md\n\n(TODO)\n"
    },
    {
      "path": "docs/evidence/M2-crypto.md",
      "content": "# Evidence: M2-crypto.md\n\n## Spec extraction\n- Source used: local PDF (`docs/spec/test-spec.pdf`, gitignored).\n- Architecture + checklist documented in `docs/architecture.md`.\n- Payload field names/encodings are not explicitly defined in the PDF; assumptions are listed in architecture docs.\n\n## Backend implementation\n### M2-01\n- Fastify/Bun skeleton with `GET /health`.\n\n### M2-02\n- AES-256-GCM decryptor (`Aes256GcmDecryptor`) with fail-closed errors.\n- Secure endpoint client with timeout and safe error mapping.\n- Deterministic unit tests with fixture (no live endpoint dependency).\n\n### M2-03\n- `POST /users/execute` flow:\n  - fetch secure payload\n  - decrypt AES-256-GCM\n  - forward users to `N8N_WEBHOOK_INGEST_URL`\n  - return persisted payload from n8n\n- `POST /users/clear` flow:\n  - call `N8N_WEBHOOK_CLEAR_URL`\n  - return `{ cleared: true }`\n- Retry + timeout for n8n calls:\n  - retries: `HTTP_RETRIES` (default 3)\n  - timeout: `HTTP_TIMEOUT_MS` (default 10000 ms)\n- Consistent error envelope:\n  - `{ \"error\": { \"code\": \"...\", \"message\": \"...\", \"details\": {} } }`\n\n### M2-04\n- Added deterministic route contract tests for:\n  - `GET /health`\n  - `POST /users/execute`\n  - `POST /users/clear`\n- Added Japa bootstrap placeholders:\n  - `packages/backend/api/japaFile.ts`\n  - `packages/backend/api/tests/japa/README.md`\n  - `bun run test:japa` (safe no-op when `@japa/runner` is unavailable)\n\n## Curl examples (localhost)\n```bash\ncurl -i http://localhost:3001/health\n\ncurl -i -X POST http://localhost:3001/users/execute \\\n  -H 'content-type: application/json'\n\ncurl -i -X POST http://localhost:3001/users/clear \\\n  -H 'content-type: application/json'\n```\n\n## Commands\n```bash\nbun run test\nbun run test:japa\nbun run lint\nbun run typecheck\n```\n\n## Outputs / notes\n- `test/lint/typecheck` executed locally and passing in this branch.\n- Endpoint lookup and GitHub operations from this sandbox can fail due DNS/network restrictions.\n- Live call command for evaluator environment:\n```bash\ncurl -s \"$SECURE_ENDPOINT_URL\" | jq\n```\n"
    },
    {
      "path": "docs/evidence/M1-n8n.md",
      "content": "# Evidence: M1-n8n.md\n\n## Version checks\n```bash\nnode -v\nnpm -v\nn8n --version\n```\n\n## Imported workflows\n- `ingest-users`\n- `list-users`\n- `clear-users`\n\n## Screenshot placeholders\n- `[ ] n8n canvas with ingest-users`\n- `[ ] n8n canvas with list-users`\n- `[ ] n8n canvas with clear-users`\n\n## Webhook URL summary\n- `POST http://localhost:5678/webhook/ingest-users`\n- `GET  http://localhost:5678/webhook/list-users`\n- `POST http://localhost:5678/webhook/clear-users`\n"
    },
    {
      "path": "docs/deploy.md",
      "content": "# Deployment\n\n## Backend (Fastify + Bun)\n\n### Recommended platforms\n- Railway\n- Render\n- Fly.io\n\n### Start command\n```bash\ncd packages/backend/api\nbun src/server.ts\n```\n\n### Environment variables (backend)\n- `API_PORT`\n- `API_HOST`\n- `CORS_ORIGIN`\n- `SECURE_ENDPOINT_URL`\n- `N8N_WEBHOOK_INGEST_URL`\n- `N8N_WEBHOOK_LIST_URL`\n- `N8N_WEBHOOK_CLEAR_URL`\n- `HTTP_TIMEOUT_MS`\n- `HTTP_RETRIES`\n\n### CORS\nSet `CORS_ORIGIN` to the frontend deployed URL.\n\n### Post-deploy smoke test\n```bash\ncurl -i https://<backend-url>/health\ncurl -i -X POST https://<backend-url>/users/execute -H 'content-type: application/json' -d '{}'\ncurl -i -X POST https://<backend-url>/users/clear -H 'content-type: application/json' -d '{}'\n```\n\n## Frontend (React page)\n\n### Recommended platforms\n- Vercel\n- Netlify\n\n### Deployment approach\nDeploy folder `packages/frontend/web` as static site plus Bun server option.\n\n### Frontend runtime API target\nEdit `packages/frontend/web/runtime-config.js`:\n```js\nglobalThis.__API_BASE_URL = \"https://<backend-url>\";\n```\n\n### Frontend publish checks\n- Open frontend URL.\n- Click `Executar` and verify table fills.\n- Click `Limpar` and verify table clears without reload.\n\n### Optional static hosting command\nIf platform supports command-based start:\n```bash\ncd packages/frontend/web\nbun src/server.ts\n```\n"
    },
    {
      "path": "instructions/filter.instructions.md",
      "content": "---\napplyTo: \"**/*\"\n---\n\n# Scope Filter (Anti-Overengineering)\n\n- Do not add \"nice to have\" features not in the spec or current issue.\n- Avoid extra layers unless the issue demands it.\n- Prefer clarity over abstraction.\n- Keep RAG local-only (docs search), no external APIs, no embeddings unless explicitly required.\n"
    },
    {
      "path": "instructions/core.instructions.md",
      "content": "---\napplyTo: \"**/*\"\n---\n\n# Core Rules (Always Loaded)\n\n## Non-negotiable\n1) Work strictly issue-by-issue using `.github/issues/*.md`.\n2) Do not implement anything not requested by the current issue.\n3) Bun-first: run scripts/tests with Bun.\n4) Docker is OPTIONAL. Never require Docker to run locally.\n5) Runtime logs: PT-BR. Comments/docblocks: EN.\n6) Every issue must update `docs/evidence/*`.\n\n## Evidence format\n- Commands executed\n- Outputs or placeholders for screenshots\n- URLs when deployed\n"
    },
    {
      "path": ".github/issues/M1-03-users-sql-schema-from-spec.md",
      "content": "Title: Add Postgres schema exactly as required by the test spec\nMilestone: M1 - Local Infra + n8n/Postgres\nLabels: infra,docs\n\n## GitFlow Branch\n- feature/M1-03-users-sql-schema\n\n## Goal\nEnsure the project uses the exact `users` table schema required by the spec.\n\n## Functional Requirements\n- Create/replace `infra/sql/users.sql` with:\n  - `id SERIAL PRIMARY KEY`\n  - `nome VARCHAR(128) NOT NULL`\n  - `email VARCHAR(255) UNIQUE NOT NULL`\n  - `phone VARCHAR(20) NOT NULL`\n- Add a short verification query section in docs.\n\n## Non-Functional Requirements\n- No Docker required.\n- Must work on Linux and WSL.\n\n## Acceptance Criteria\n- Running `psql ... -f infra/sql/users.sql` succeeds.\n- `SELECT * FROM users LIMIT 1;` works.\n\n## Deliverables / Evidence\n- `docs/evidence/M1-db.md` includes:\n  - commands used\n  - output of `\\d users`\n  - output of `SELECT count(*) FROM users;`\n"
    },
    {
      "path": ".github/issues/M5-02-agentic-rag-workflow-doc.md",
      "content": "Title: Document agentic workflow using rag:search before implementing each issue\nMilestone: M5 - Bonus RAG-ready Docs Search\nLabels: docs,rag\n\n## GitFlow Branch\n- feature/M5-02-rag-workflow-doc\n\n## Goal\nMake the agentic process explicit and consistent.\n\n## Functional Requirements\n- Update `AGENTS.md` to require:\n  - run `bun run rag:search` before coding\n  - add evidence entry per issue\n- Add `docs/agentic-workflow.md` with examples.\n\n## Non-Functional Requirements\n- Must remain lightweight and non-bureaucratic\n\n## Acceptance Criteria\n- Documentation is clear and directly usable.\n\n## Deliverables / Evidence\n- `docs/evidence/M5-rag.md` updated\n"
    },
    {
      "path": ".github/issues/M1-04-export-n8n-workflows-placeholders.md",
      "content": "Title: Add exported n8n workflow JSONs (ingest/list/clear) + import instructions\nMilestone: M1 - Local Infra + n8n/Postgres\nLabels: workflows,docs\n\n## GitFlow Branch\n- feature/M1-04-n8n-workflows\n\n## Goal\nProvide reproducible n8n workflows: ingest users, list users, clear users (TRUNCATE).\n\n## Functional Requirements\n- Add workflow JSON exports under:\n  - `packages/tooling/workflows/exported/ingest-users.json`\n  - `packages/tooling/workflows/exported/list-users.json`\n  - `packages/tooling/workflows/exported/clear-users.json`\n- Document how to import them in `docs/workflows.md`.\n- Ensure clear workflow performs a TRUNCATE on `users`.\n\n## Non-Functional Requirements\n- Workflows must be readable and minimal.\n- No secrets committed.\n\n## Acceptance Criteria\n- A user can import workflows into n8n UI and execute them.\n- Postgres nodes are configurable via n8n credentials.\n\n## Deliverables / Evidence\n- `docs/evidence/M1-n8n.md` with:\n  - n8n version\n  - imported workflows list (screenshots placeholders)\n  - webhook URLs documented\n"
    },
    {
      "path": ".github/issues/M4-01-deploy-backend-to-cloud.md",
      "content": "Title: Deploy backend to cloud platform (Railway/Render/Fly/Heroku) and document steps\nMilestone: M4 - Deploy + Evidence Pack\nLabels: deploy,backend,docs\n\n## GitFlow Branch\n- feature/M4-01-deploy-backend\n\n## Goal\nDeploy backend publicly and document how to reproduce.\n\n## Functional Requirements\n- Choose a cloud platform and deploy backend.\n- Configure env vars securely on the platform.\n- Add CORS config so frontend can call backend.\n\n## Non-Functional Requirements\n- No secrets in repo\n- Stable URL\n\n## Acceptance Criteria\n- Backend URL online, `/health` returns 200.\n\n## Deliverables / Evidence\n- `docs/evidence/M4-deploy.md` includes:\n  - platform used\n  - deployed URL\n  - env var list (names only)\n  - curl output for `/health`\n"
    },
    {
      "path": ".github/issues/M3-01-react-ui-table-and-layout.md",
      "content": "Title: Implement responsive React UI with <table> and two buttons (Executar/Limpar)\nMilestone: M3 - Frontend UX + Integration\nLabels: frontend,docs\n\n## GitFlow Branch\n- feature/M3-01-react-ui-table\n\n## Goal\nImplement the required UI: a `<table>` populated dynamically and 2 buttons.\n\n## Functional Requirements\n- UI must include:\n  - `<table>` for users (nome/email/phone)\n  - Button \"Executar\"\n  - Button \"Limpar\"\n- UI updates dynamically (no reload) after any action.\n\n## Non-Functional Requirements\n- Responsive layout\n- Accessible buttons and table semantics\n\n## Acceptance Criteria\n- UI renders correctly on mobile and desktop widths.\n- Table updates without page refresh.\n\n## Deliverables / Evidence\n- `docs/evidence/M3-ui.md` includes screenshots placeholders and dev run logs\n"
    },
    {
      "path": ".github/issues/M0-01-init-bun-monorepo.md",
      "content": "Title: Initialize Bun + Lerna monorepo structure (agentic-ready)\nMilestone: M0 - Bootstrap & Standards\nLabels: epic,chore,docs\n\n## Goal\nCreate a clean Bun monorepo (Lerna) that separates backend, frontend and shared packages, plus agentic instruction folders.\n\n## Functional Requirements\n- Create the repository tree:\n  - `packages/backend/api`\n  - `packages/frontend/web`\n  - `packages/shared/contracts`\n  - `packages/tooling/rag`\n  - `packages/tooling/workflows`\n  - `docs/`, `docs/evidence/`\n  - `instructions/`, `.codex/`, `.gemini/`, `AGENTS.md`\n  - `.github/issues/`, PR template\n- Add root scripts:\n  - `dev`, `test`, `lint`, `typecheck`, `rag:index`, `rag:search`, `gh:bootstrap`\n\n## Non-Functional Requirements\n- Bun-first tooling\n- No secrets committed\n- Docker is optional only (do not require it)\n\n## Acceptance Criteria\n- `bun install` works at root\n- `bun run test` runs all packages (may be empty test placeholders)\n- Repo contains `README.md` and `PROJECT-SETUP.md` (initial content)\n\n## Deliverables / Evidence\n- `docs/evidence/M0-setup.md` with:\n  - `bun -v`, `bun install`, `bun run test` outputs\n  - tree snapshot or summary\n\n## Repo Areas\n- Root `package.json`, `lerna.json`, `tsconfig.base.json`\n- `packages/*`, `docs/*`, `instructions/*`, `.codex/*`, `.gemini/*`\n"
    },
    {
      "path": ".github/issues/M3-03-jest-component-tests.md",
      "content": "Title: Add Jest tests for UI state transitions (execute/clear)\nMilestone: M3 - Frontend UX + Integration\nLabels: frontend,testing\n\n## GitFlow Branch\n- feature/M3-03-jest-tests\n\n## Goal\nAdd basic UI tests to validate dynamic behavior without real backend calls.\n\n## Functional Requirements\n- Mock API client\n- Test:\n  - execute populates table\n  - clear empties table\n  - loading disables buttons\n\n## Non-Functional Requirements\n- Tests deterministic and fast\n\n## Acceptance Criteria\n- `bun run test` passes from root\n\n## Deliverables / Evidence\n- `docs/evidence/M3-ui.md` includes test output\n"
    },
    {
      "path": ".github/issues/M0-02-agentic-instructions-policy-pack.md",
      "content": "Title: Add agentic instruction packs (Codex/Gemini/Copilot) + personas\nMilestone: M0 - Bootstrap & Standards\nLabels: docs,chore\n\n## Functional Requirements\n- Add `instructions/*.instructions.md` policy packs:\n  - core, personas, backend, frontend, testing, security, scripts, rag, filter\n- Add `.codex/` and `.gemini/` adapters pointing to the core policies\n- Add `AGENTS.md` describing the issue-by-issue workflow\n\n## Non-Functional Requirements\n- Rules must prevent scope creep (\"no features not requested by the current issue\")\n- Must specify language policy: runtime logs PT-BR, comments/docblocks EN\n\n## Acceptance Criteria\n- Policies exist and are discoverable\n- `AGENTS.md` clearly describes branch/PR and evidence process\n\n## Deliverables / Evidence\n- `docs/evidence/M0-policy.md` linking all policies and explaining how to use them\n\n## Repo Areas\n- `instructions/*`, `.codex/*`, `.gemini/*`, `AGENTS.md`\n"
    },
    {
      "path": ".github/issues/M4-03-final-e2e-evidence-pack.md",
      "content": "Title: Produce final evidence pack and update README with live URLs\nMilestone: M4 - Deploy + Evidence Pack\nLabels: docs,chore\n\n## GitFlow Branch\n- feature/M4-03-evidence-pack\n\n## Goal\nFinalize documentation and evidence so evaluators can verify quickly.\n\n## Functional Requirements\n- Update `README.md` with:\n  - frontend URL\n  - backend URL\n  - short usage steps\n- Ensure `PROJECT-SETUP.md` is accurate for Linux and WSL.\n- Fill `docs/evidence/M4-deploy.md` with final proofs.\n\n## Non-Functional Requirements\n- Documentation must be concise and reproducible.\n\n## Acceptance Criteria\n- A reviewer can run locally or validate online with minimal steps.\n\n## Deliverables / Evidence\n- Completed evidence files under `docs/evidence/`\n"
    },
    {
      "path": ".github/issues/M5-01-rag-index-and-search-cli.md",
      "content": "Title: Implement local RAG-like docs index + search CLI for repo documentation\nMilestone: M5 - Bonus RAG-ready Docs Search\nLabels: rag,tooling,docs\n\n## GitFlow Branch\n- feature/M5-01-rag-cli\n\n## Goal\nProvide a local “RAG-like” tool to index repo docs and search them quickly.\n\n## Functional Requirements\n- Implement:\n  - `bun run rag:index` -> creates a JSON index from `docs/` + `instructions/` + `.github/issues/`\n  - `bun run rag:search \"<query>\"` -> returns ranked matches with file paths and snippets\n- Store index under `packages/tooling/rag/rag/index.json`\n\n## Non-Functional Requirements\n- No external services\n- Fast execution\n\n## Acceptance Criteria\n- Search returns relevant hits for queries like \"AES-256-GCM\" and \"TRUNCATE users\".\n\n## Deliverables / Evidence\n- `docs/evidence/M5-rag.md` with:\n  - index generation output\n  - sample searches\n"
    },
    {
      "path": ".github/issues/M4-02-deploy-frontend-to-cloud.md",
      "content": "Title: Deploy frontend (Vercel/Netlify) pointing to deployed backend\nMilestone: M4 - Deploy + Evidence Pack\nLabels: deploy,frontend,docs\n\n## GitFlow Branch\n- feature/M4-02-deploy-frontend\n\n## Goal\nDeploy frontend and connect it to the deployed backend.\n\n## Functional Requirements\n- Deploy frontend\n- Configure `VITE_API_BASE_URL` (or equivalent)\n- Ensure UI can execute and clear flows\n\n## Non-Functional Requirements\n- Responsive UX on mobile\n- Stable URL\n\n## Acceptance Criteria\n- Public URL shows table and buttons.\n- Execute and clear works end-to-end.\n\n## Deliverables / Evidence\n- `docs/evidence/M4-deploy.md` includes:\n  - frontend URL\n  - backend URL\n  - screenshots placeholders\n"
    },
    {
      "path": ".github/issues/M1-02-run-n8n-locally-no-docker.md",
      "content": "Title: Run n8n locally via Node (no Docker) + import workflows\nMilestone: M1 - Local Infra + n8n/Postgres\nLabels: workflows,docs\n\n## Functional Requirements\n- Document Node installation (NVM recommended) for Linux/WSL\n- Document installing and running n8n without Docker\n- Provide workflow export placeholders under `packages/tooling/workflows/exported/`\n- Document how to import workflows in n8n UI\n\n## Non-Functional Requirements\n- Keep instructions short and accurate\n- No platform-specific assumptions beyond Linux/WSL\n\n## Acceptance Criteria\n- n8n UI reachable locally\n- Workflows can be imported\n\n## Deliverables / Evidence\n- `docs/evidence/M1-n8n.md` with:\n  - `node -v`, `npm -v`, `n8n --version` outputs\n  - screenshot placeholders\n  - webhook URLs summary\n\n## Repo Areas\n- `packages/tooling/workflows/exported/*`, `docs/workflows.md`, `PROJECT-SETUP.md`\n"
    },
    {
      "path": ".github/issues/M1-01-local-postgres-setup-no-docker.md",
      "content": "Title: Local Postgres setup (Linux/WSL) and schema initialization (no Docker)\nMilestone: M1 - Local Infra + n8n/Postgres\nLabels: infra,docs\n\n## Functional Requirements\n- Document Postgres installation for Linux and WSL\n- Provide SQL schema file `infra/sql/users.sql` matching the required table\n- Provide environment examples (no secrets)\n\n## Non-Functional Requirements\n- Docker must remain optional\n- Setup must be reproducible\n\n## Acceptance Criteria\n- User can create `hw_db` and apply `users.sql` successfully\n\n## Deliverables / Evidence\n- `docs/evidence/M1-db.md` with:\n  - install steps\n  - `psql` commands used\n  - verification query output (e.g. SELECT count(*) FROM users;)\n\n## Repo Areas\n- `infra/sql/users.sql`, `PROJECT-SETUP.md`, `docs/evidence/M1-db.md`\n"
    },
    {
      "path": ".github/issues/M2-03-n8n-webhook-forward-ingest-and-return-users.md",
      "content": "Title: Forward decrypted users to n8n ingest webhook and return persisted users to frontend\nMilestone: M2 - Crypto + Backend Use Cases\nLabels: backend,workflows,testing\n\n## GitFlow Branch\n- feature/M2-03-n8n-forward-ingest\n\n## Goal\nBackend must forward decrypted users to n8n webhook so n8n stores in Postgres and returns persisted users.\n\n## Functional Requirements\n- Add endpoint `POST /users/execute`\n  - fetch secure endpoint\n  - decrypt AES-256-GCM\n  - POST decrypted users to `N8N_WEBHOOK_INGEST_URL`\n  - return response payload to frontend\n- Add endpoint `POST /users/clear`\n  - call `N8N_WEBHOOK_CLEAR_URL`\n  - return `{ cleared: true }`\n\n## Non-Functional Requirements\n- Timeouts and retries (e.g. 3 attempts) for n8n webhook calls\n- Return consistent error format\n\n## Acceptance Criteria\n- Manual E2E: clicking \"Executar\" populates table\n- Manual E2E: clicking \"Limpar\" clears table and truncates DB\n\n## Deliverables / Evidence\n- `docs/evidence/M2-crypto.md` includes:\n  - curl examples to `/users/execute` and `/users/clear`\n  - response samples (redacted where needed)\n"
    },
    {
      "path": ".github/issues/M2-01-fastify-bun-ddd-skeleton.md",
      "content": "Title: Implement Bun + Fastify backend skeleton with DDD boundaries and health endpoint\nMilestone: M2 - Crypto + Backend Use Cases\nLabels: backend,testing,docs\n\n## GitFlow Branch\n- feature/M2-01-fastify-bun-skeleton\n\n## Goal\nCreate a Bun runtime backend using Fastify, organized in DDD layers.\n\n## Functional Requirements\n- Create Fastify server entrypoint with:\n  - `GET /health` returning `{ status: \"ok\" }`\n- Define DDD-ish structure:\n  - `domain/` entities + value objects (minimal)\n  - `application/` use cases\n  - `infrastructure/` adapters (http clients)\n  - `presentation/` controllers/routes\n- Add basic config loading from `.env` (no secrets committed)\n\n## Non-Functional Requirements\n- Fast startup time\n- Clear error handling boundaries\n\n## Acceptance Criteria\n- `bun run dev` starts server\n- `GET /health` returns 200\n\n## Deliverables / Evidence\n- `docs/evidence/M2-crypto.md` includes:\n  - `bun -v`\n  - server startup log\n  - curl output for `/health`\n"
    },
    {
      "path": ".github/issues/M2-04-japa-integration-tests-for-api.md",
      "content": "Title: Add Japa integration tests for /health, /users/execute, /users/clear\nMilestone: M2 - Crypto + Backend Use Cases\nLabels: backend,testing\n\n## GitFlow Branch\n- feature/M2-04-japa-tests\n\n## Goal\nAdd test coverage using Japa for the main backend endpoints.\n\n## Functional Requirements\n- Add tests:\n  - `/health` 200\n  - `/users/execute` success path using mocked secure endpoint + mocked n8n webhook\n  - `/users/clear` success path with mocked n8n webhook\n\n## Non-Functional Requirements\n- Tests must be deterministic (no reliance on real external services)\n\n## Acceptance Criteria\n- `bun run test` passes from repo root\n\n## Deliverables / Evidence\n- `docs/evidence/M2-crypto.md` includes test output\n"
    },
    {
      "path": ".github/issues/M3-02-frontend-api-integration-execute-clear.md",
      "content": "Title: Integrate frontend with backend API for execute and clear flows\nMilestone: M3 - Frontend UX + Integration\nLabels: frontend,testing\n\n## GitFlow Branch\n- feature/M3-02-frontend-api\n\n## Goal\nWire the UI buttons to backend API endpoints and update table state.\n\n## Functional Requirements\n- On \"Executar\":\n  - call backend `POST /users/execute`\n  - render returned users in table\n- On \"Limpar\":\n  - call backend `POST /users/clear`\n  - clear UI table immediately after success\n- Add loading and error states.\n\n## Non-Functional Requirements\n- Avoid UI flicker; disable button while loading.\n- Handle backend error payload consistently.\n\n## Acceptance Criteria\n- Clicking \"Executar\" populates table dynamically.\n- Clicking \"Limpar\" clears table dynamically (no reload).\n\n## Deliverables / Evidence\n- `docs/evidence/M3-ui.md` includes a short E2E checklist and outputs\n"
    },
    {
      "path": ".github/issues/M2-02-secure-endpoint-fetch-and-decrypt-aes-256-gcm.md",
      "content": "Title: Fetch secure endpoint and decrypt AES-256-GCM payload (unit tested)\nMilestone: M2 - Crypto + Backend Use Cases\nLabels: backend,security,testing\n\n## GitFlow Branch\n- feature/M2-02-aes-gcm-decrypt\n\n## Goal\nImplement AES-256-GCM decryption logic to transform encrypted data into user records.\n\n## Functional Requirements\n- Implement a `SecureEndpointClient` that fetches the secure endpoint URL.\n- Implement `Aes256GcmDecryptor` that:\n  - reads ciphertext + IV + authTag + key from payload (format may be provided by endpoint)\n  - returns decrypted JSON user list\n- Add unit tests with a fixed fixture (do not depend on the live endpoint for unit tests)\n\n## Non-Functional Requirements\n- Fail closed: any crypto error must return a safe error.\n- No secrets hardcoded.\n\n## Acceptance Criteria\n- Unit tests validate decryptor output for fixture.\n- Live mode can decrypt from endpoint (manual evidence).\n\n## Deliverables / Evidence\n- `docs/evidence/M2-crypto.md` includes:\n  - sample (redacted) payload shape\n  - curl of secure endpoint (redacted secrets)\n  - proof of decrypted result count\n"
    }
  ]
}