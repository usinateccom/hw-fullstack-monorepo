{
  "generatedAt": "2026-02-22T14:34:38.531Z",
  "files": [
    {
      "path": "docs/workflows.md",
      "content": "# Workflows (n8n)\n\n## Exported files\n- `packages/tooling/workflows/exported/ingest-users.json`\n- `packages/tooling/workflows/exported/list-users.json`\n- `packages/tooling/workflows/exported/clear-users.json`\n\n## Import steps\n1. Start n8n (`n8n`) and open `http://localhost:5678`.\n2. Use **Import from file** and import each JSON export.\n3. Configure `postgres-local` credentials in every Postgres node.\n4. Save workflows and activate each one.\n\n## Credentials (required)\nCreate one Postgres credential and reuse in all Postgres nodes:\n- Host: `localhost`\n- Port: `5432`\n- Database: `hw_fullstack_db`\n- User: `postgres`\n- Password: `<defined .env password>`\n- SSL: `off`\n\n## Expected webhook paths\n- Ingest: `POST /webhook/ingest-users`\n- List: `GET /webhook/list-users`\n- Clear: `POST /webhook/clear-users`\n\n## Production URL mapping (do not guess paths)\nn8n can generate dynamic webhook paths depending on workflow/node metadata.\nAlways copy the full **Production URL** from each Webhook node and map in backend `.env`:\n- `N8N_WEBHOOK_INGEST_URL=<production-url-of-ingest-users>`\n- `N8N_WEBHOOK_LIST_URL=<production-url-of-list-users>`\n- `N8N_WEBHOOK_CLEAR_URL=<production-url-of-clear-users>`\n\nCommon mistake:\n- Running curl with placeholders like `<path-real-ingest>` returns:\n  - `The requested webhook \"POST <path-real-ingest>\" is not registered`\n- Use the copied URL exactly as shown in node Production URL tab.\n\nIf imported via CLI, publish and restart n8n:\n```bash\nN8N_USER_FOLDER=~/.n8n-test N8N_ENCRYPTION_KEY=<your-key> bunx n8n list:workflow\nN8N_USER_FOLDER=~/.n8n-test N8N_ENCRYPTION_KEY=<your-key> bunx n8n publish:workflow --id <workflow-id>\n```\n\nOptional webhook registry inspection:\n```bash\nbun -e 'import { Database } from \"bun:sqlite\";\nconst db=new Database(process.env.HOME+\"/.n8n-test/.n8n/database.sqlite\",{readonly:true});\nconst rows=db.query(\"select workflowId, webhookPath, method from webhook_entity order by workflowId\").all();\nconsole.log(rows);'\n```\n\n## Notes\n- `clear-users` runs `TRUNCATE TABLE users RESTART IDENTITY;`.\n- Keep credentials inside n8n; do not commit secrets.\n- `404 The requested webhook ... is not registered` means workflow is not active and/or backend env has wrong webhook URL.\n- `502 Application failed to respond` on n8n URL means runtime/service issue (not webhook path issue).\n\n## End-to-end production smoke commands\n```bash\n# n8n webhooks (direct)\ncurl -i -X POST \"https://<n8n-domain>/webhook/ingest-users\" -H 'content-type: application/json' -d '{}'\ncurl -i \"https://<n8n-domain>/webhook/list-users\"\ncurl -i -X POST \"https://<n8n-domain>/webhook/clear-users\" -H 'content-type: application/json' -d '{}'\n\n# backend pipeline\ncurl -i -X POST \"https://<backend-domain>/users/execute\" -H 'content-type: application/json' -d '{}'\ncurl -i -X POST \"https://<backend-domain>/users/clear\" -H 'content-type: application/json' -d '{}'\n```\n"
    },
    {
      "path": "docs/spec/README.md",
      "content": "# Local Spec Files (do not commit)\n\nPlace the take-home test PDF here as:\n- docs/spec/test-spec.pdf\n\nThis file is intentionally ignored by git.\n"
    },
    {
      "path": "docs/api.md",
      "content": "# API\n\nBase URL (local): `http://localhost:3001`\n\n## GET /health\nReturns backend liveness.\n\n### Response 200\n```json\n{ \"status\": \"ok\" }\n```\n\n## POST /users/execute\nRuns complete pipeline:\n1. fetch encrypted payload from secure endpoint\n2. decrypt AES-256-GCM\n3. forward users to n8n ingest webhook\n4. return persisted users payload\n\n### Response 200 (example)\n```json\n{\n  \"users\": [\n    { \"id\": 1, \"nome\": \"Ana\", \"email\": \"ana@example.com\", \"phone\": \"+55 11 90000-0001\" }\n  ]\n}\n```\n\n## POST /users/clear\nTriggers n8n clear webhook and returns confirmation.\n\n### Response 200\n```json\n{ \"cleared\": true }\n```\n\n## Error envelope\nAll handled errors return:\n```json\n{\n  \"error\": {\n    \"code\": \"N8N_WEBHOOK_FAILED\",\n    \"message\": \"Falha de rede ao chamar webhook do n8n\",\n    \"details\": {}\n  }\n}\n```\n"
    },
    {
      "path": "docs/agentic-workflow.md",
      "content": "# Agentic Workflow\n\n## Purpose\nKeep issue delivery fast and reproducible by checking local docs context before writing code.\n\n## Standard loop\n1. Choose issue in `.github/issues/`.\n2. Run:\n```bash\nbun run rag:search \"<issue keywords>\"\n```\n3. Create feature branch.\n4. Implement only the issue scope.\n5. Update evidence file for the milestone.\n6. Run validations (`test`, `lint`, `typecheck`).\n7. Open PR to `develop`.\n\n## Example\nFor issue `M2-03`:\n```bash\nbun run rag:search \"M2-03 n8n execute clear\"\ngit checkout -b feature/M2-03-n8n-forward-ingest\n```\n\nUse top hits to avoid duplicating existing decisions from `docs/` and issue files.\n"
    },
    {
      "path": "docs/architecture.md",
      "content": "# Architecture\n\n## Scope\nFullstack pipeline with Bun + Fastify backend, n8n workflows, PostgreSQL persistence, and React frontend.\n\n## End-to-end flow\n1. Frontend calls backend `POST /users/execute`.\n2. Backend fetches encrypted payload from secure endpoint.\n3. Backend decrypts payload using AES-256-GCM.\n4. Backend forwards decrypted users to n8n ingest webhook.\n5. n8n writes users to PostgreSQL and returns persisted rows.\n6. Frontend renders rows in a `<table>` without reloading.\n7. Frontend `POST /users/clear` triggers n8n clear webhook (TRUNCATE) and clears table state.\n\n## Secure endpoint details (validated)\n- Endpoint URL: `https://n8n-apps.nlabshealth.com/webhook/data-5dYbrVSlMVJxfmco`\n- Method: `GET`\n- Response top-level keys: `success`, `data`\n- Encryption metadata fields:\n  - `data.algorithm`\n  - `data.secretKey`\n  - `data.encrypted.iv`\n  - `data.encrypted.authTag`\n  - `data.encrypted.encrypted`\n\n## Encrypted payload contract\nAES-256-GCM decryptor supports:\n- nested secure-endpoint shape above\n- flat fixture shape (`ciphertext`, `iv`, `authTag`, `key`)\n\n### Encoding behavior\n- auto-detects `hex` and `base64`\n- validates 32-byte key length\n- fail-closed on invalid auth tag/invalid payload\n\n## User model and mapping\nExpected user fields:\n- `nome`\n- `email`\n- `phone`\n\nOptional during pipeline:\n- `id` generated by PostgreSQL.\n\n## n8n webhooks behavior\n- `ingest-users` (POST): receive decrypted users, persist to DB, return persisted users list.\n- `list-users` (GET): return persisted users list.\n- `clear-users` (POST): `TRUNCATE users` and return `{ cleared: true }`.\n\n## PostgreSQL schema (exact spec)\n```sql\nCREATE TABLE users (\n  id SERIAL PRIMARY KEY,\n  nome VARCHAR(128) NOT NULL,\n  email VARCHAR(255) UNIQUE NOT NULL,\n  phone VARCHAR(20) NOT NULL\n);\n```\n\n## Spec Checklist\n- Backend in Node/Fastify with REST endpoints.\n- AES-256-GCM decryption implemented in backend.\n- Decrypted data forwarded to n8n webhook.\n- n8n persists in PostgreSQL and returns persisted data.\n- Frontend has `<table>` with users from pipeline.\n- Frontend has `Executar` and `Limpar` buttons.\n- UI updates dynamically without full page reload.\n- Responsive layout for different devices.\n- Cloud deployment for frontend and backend with public URLs.\n"
    },
    {
      "path": "docs/evidence/M4-deploy.md",
      "content": "# Evidence: M4-deploy.md\n\n## M4-04 - vercel + CI pipeline\n\n### CI workflow\n- File: `.github/workflows/ci.yml`\n- Trigger: push/PR on `develop` and `main`\n- Jobs:\n  - `bun install --frozen-lockfile`\n  - `bun run test`\n  - `bun run lint`\n  - `bun run typecheck`\n  - `bun run --cwd packages/frontend/web build`\n\n### Vercel deploy workflow\n- File: `.github/workflows/vercel-deploy.yml`\n- Preview deploy: PRs targeting `develop`/`main` (when Vercel secrets exist)\n- Production deploy: push to `main` (when Vercel secrets exist)\n- Required GitHub secrets:\n  - `VERCEL_TOKEN`\n  - `VERCEL_ORG_ID`\n  - `VERCEL_PROJECT_ID`\n\n## C0-11 - unified CD for 3 deploys\n\n### Workflow\n- File: `.github/workflows/release-deploy.yml`\n- Trigger:\n  - `push` on `main`\n  - `workflow_dispatch`\n\n### Unified deployment order\n1. Railway backend deploy hook trigger\n2. Railway n8n deploy hook trigger\n3. Readiness wait (`backend /health`, `n8n /`)\n4. Vercel production deploy\n5. Smoke checks (`/health`, frontend root, `/users/execute`, `/users/clear`)\n\n### Required GitHub secrets\n- `RAILWAY_BACKEND_DEPLOY_HOOK_URL`\n- `RAILWAY_N8N_DEPLOY_HOOK_URL`\n- `VERCEL_TOKEN`\n- `VERCEL_ORG_ID`\n- `VERCEL_PROJECT_ID`\n\n### Required GitHub variables\n- `PROD_BACKEND_URL`\n- `PROD_N8N_URL`\n- `PROD_FRONTEND_URL`\n\n### CI proof placeholders\n- `[ ] PR checks screenshot/link`\n- `[ ] main branch workflow run screenshot/link`\n- `[ ] vercel preview workflow run link`\n- `[ ] vercel production workflow run link`\n- `[ ] vercel preview URL`\n- `[ ] vercel production URL`\n\n## M4-01 - backend deployment\n\n### Platform\n- `PENDING` (Railway/Render/Fly)\n\n### Backend URL\n- `https://hw-fullstack-monorepo-production.up.railway.app`\n\n### Env var names configured\n- `API_PORT`\n- `API_HOST`\n- `CORS_ORIGIN`\n- `SECURE_ENDPOINT_URL`\n- `N8N_WEBHOOK_INGEST_URL`\n- `N8N_WEBHOOK_LIST_URL`\n- `N8N_WEBHOOK_CLEAR_URL`\n- `HTTP_TIMEOUT_MS`\n- `HTTP_RETRIES`\n\n### Curl proof placeholders\n```bash\ncurl -i https://hw-fullstack-monorepo-production.up.railway.app/health\ncurl -i -X POST https://hw-fullstack-monorepo-production.up.railway.app/users/execute -H 'content-type: application/json' -d '{}'\ncurl -i -X POST https://hw-fullstack-monorepo-production.up.railway.app/users/clear -H 'content-type: application/json' -d '{}'\n```\n\n## M4-02 - frontend deployment\n\n### Platform\n- `PENDING` (Vercel/Netlify)\n\n### Frontend URL\n- `https://hw-fullstack-monorepo-web.vercel.app`\n\n### Frontend env var\n- `VITE_API_BASE_URL=https://<backend-url>`\n\n### E2E proof placeholders\n- `[ ] front online screenshot`\n- `[ ] execute flow screenshot`\n- `[ ] clear flow screenshot`\n\n## M4-03 - final reviewer pack\n\n### Reviewer quickcheck\n1. Open frontend URL.\n2. Click `Executar` and verify dynamic table population.\n3. Click `Limpar` and verify table clears without reload.\n4. Call backend `/health` and confirm `200`.\n\n### Remaining external actions\n- Publish backend and frontend URLs.\n- Attach screenshots and curl outputs above.\n\n## Local validation status (2026-02-18)\n- Monorepo checks executed successfully:\n  - `bun run test`\n  - `bun run lint`\n  - `bun run typecheck`\n- Deploy evidence is still pending cloud publication and public URLs.\n\n## Remaining manual cloud actions\n- Validate n8n production service is online (`200` on service root).\n- Ensure n8n workflows are `Published` and webhook production URLs copied exactly to backend env.\n- Confirm secure endpoint env uses official source:\n  - `SECURE_ENDPOINT_URL=https://n8n-apps.nlabshealth.com/webhook/data-5dYbrVSlMVJxfmco`\n- Attach final run screenshots after `execute` and `clear`.\n\n## Production fetch diagnostics checklist\n- `[ ] Vercel env: VITE_API_BASE_URL points to backend public URL (not localhost)`\n- `[ ] Backend env: CORS_ORIGIN includes frontend Vercel domain(s)`\n- `[ ] Curl https://<backend-url>/health returns 200`\n- `[ ] Curl POST /users/execute returns JSON payload`\n- `[ ] Browser Network tab confirms request target matches configured backend URL`\n\n## C0-13 production smoke/runbook hardening\n\nAdded:\n- `scripts/prod-smoke.sh` (single entrypoint to test backend + n8n in production)\n- root script alias: `bun run smoke:prod`\n- deploy docs updated with copy/paste smoke command and diagnostics map\n\nSmoke command:\n```bash\nBACKEND_URL=\"https://<backend-domain>\" \\\nN8N_BASE_URL=\"https://<n8n-domain>\" \\\nSEED_COUNT=\"20\" \\\nbun run smoke:prod\n```\n\nObserved from this execution environment (agent sandbox):\n- DNS lookups for target domains failed with `Could not resolve host`\n- Result: external validation must be re-run from operator machine/CI runner with public DNS access\n"
    },
    {
      "path": "docs/evidence/M1-db.md",
      "content": "# Evidence: M1-db.md\n\n## Commands used\n```bash\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -f infra/sql/users.sql\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"\\\\d users\"\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"SELECT count(*) FROM users;\"\n```\n\n## Expected outputs\n\n### `\\d users`\n```text\n                        Table \"public.users\"\n Column |          Type          | Collation | Nullable |              Default\n--------+------------------------+-----------+----------+-----------------------------------\n id     | integer                |           | not null | nextval('users_id_seq'::regclass)\n nome   | character varying(128) |           | not null |\n email  | character varying(255) |           | not null |\n phone  | character varying(20)  |           | not null |\nIndexes:\n    \"users_pkey\" PRIMARY KEY, btree (id)\n    \"users_email_key\" UNIQUE CONSTRAINT, btree (email)\n```\n\n### `SELECT count(*) FROM users;`\n```text\n count\n-------\n     0\n(1 row)\n```\n\n## C0-03 verification snapshot (2026-02-19)\n\nCommands executed during n8n integration test:\n```bash\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"TRUNCATE TABLE users RESTART IDENTITY;\"\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"SELECT count(*) FROM users;\"\n```\n\nObserved count before and after attempted webhook calls:\n```text\n count\n-------\n     0\n(1 row)\n```\n\nNote:\n- Database connection and schema are healthy.\n- Since webhook registration is still pending adjustment in headless n8n run, no persisted rows were produced in this specific C0-03 attempt yet.\n"
    },
    {
      "path": "docs/evidence/C0-traceability.md",
      "content": "# Evidence: C0-traceability.md\n\n## Scope Traceability Matrix\n\n| Requirement | Implementation Reference | Validation Evidence | Status |\n|---|---|---|---|\n| Backend in Node/Fastify + Bun runtime | `packages/backend/api/package.json`, `packages/backend/api/src/infrastructure/http/create-app.ts` | `bun run test`, `bun run lint`, `bun run typecheck` pass | done |\n| Secure endpoint fetch | `packages/backend/api/src/infrastructure/http/secure-endpoint-client.ts` | secure endpoint contract verified in `docs/evidence/M2-crypto.md` | done |\n| AES-256-GCM decryption | `packages/backend/api/src/application/services/aes256gcm-decryptor.ts` | unit tests in `packages/backend/api/tests/unit/aes256gcm-decryptor.test.ts` | done |\n| Send decrypted payload to n8n webhook | `packages/backend/api/src/application/use-cases/execute-users-pipeline.ts`, `packages/backend/api/src/infrastructure/http/n8n-webhook-client.ts` | integration/japa tests for execute flow | done |\n| n8n persists to PostgreSQL and returns users | `packages/tooling/workflows/exported/ingest-users.json`, `packages/tooling/workflows/exported/list-users.json` | SQL and workflow evidence in `docs/evidence/M1-db.md`, `docs/evidence/M1-n8n.md` | partial |\n| Frontend renders dynamic `<table>` | `packages/frontend/web/src/App.js` | Jest/RTL tests in `packages/frontend/web/tests/app.jest.test.js` | done |\n| Frontend has buttons `Executar` and `Limpar` with dynamic updates | `packages/frontend/web/src/App.js`, `packages/frontend/web/src/state.js` | Jest/RTL state transition tests | done |\n| Clear action truncates DB through n8n | `packages/tooling/workflows/exported/clear-users.json` | workflow SQL query uses `TRUNCATE TABLE users RESTART IDENTITY` | done |\n| Responsive frontend | `packages/frontend/web/src/styles.css` | responsive rules + manual checklist in `docs/evidence/M3-ui.md` | partial |\n| Required users schema | `infra/sql/users.sql` | DB schema output in `docs/evidence/M1-db.md` | done |\n| Documentation and setup reproducibility | `README.md`, `PROJECT-SETUP.md`, `docs/workflows.md` | documented commands and evidence files | done |\n| Cloud deploy with public URLs | `docs/deploy.md`, `docs/evidence/M4-deploy.md`, `README.md` | URLs still `PENDING` | missing |\n\n## Blocking Gaps\n\n1. Cloud deployment signoff is pending.\n   - Action: complete issue `#19` and fill live URLs/curl outputs in `README.md` and `docs/evidence/M4-deploy.md`.\n2. Live n8n+Postgres full-flow proof is not fully captured as command output in current environment.\n   - Action: complete issue `#17` with execute/clear DB before-after outputs.\n3. Frontend responsive proof is still checklist/placeholder-based.\n   - Action: complete issue `#18` with final screenshots from desktop/mobile.\n\n## Signoff Notes\n\n- Local quality gates (`test/lint/typecheck`) are green.\n- Backend/Frontend feature scope is implemented and tested with deterministic tests.\n- Final submission is blocked only by live deployment proof and final runbook evidence completion.\n\n"
    },
    {
      "path": "docs/evidence/M0-policy.md",
      "content": "# Evidence: M0-policy.md\n\n## Policy files present\n- `instructions/core.instructions.md`\n- `instructions/filter.instructions.md`\n- `AGENTS.md`\n- `.codex/` adapter folder\n- `.gemini/` adapter folder\n\n## Usage summary\n- Core policy enforces issue-by-issue execution and Bun-first workflow.\n- Scope filter prevents overengineering and non-requested features.\n- `AGENTS.md` documents branch/PR/evidence lifecycle.\n- Agentic process now requires `bun run rag:search` before coding each issue.\n"
    },
    {
      "path": "docs/evidence/M5-rag.md",
      "content": "# Evidence: M5-rag.md\n\n## M5-01 - local rag-like index/search\n\n### Commands executed\n```bash\nbun run rag:index\nbun run rag:search \"AES-256-GCM\"\nbun run rag:search \"TRUNCATE users\"\nbun run rag:search \"execute clear production webhook placeholder\"\nbun run rag:search \"unified cd railway vercel deploy hooks\"\n```\n\n### Observed outputs\n- Index generated at `packages/tooling/rag/rag/index.json`\n- Indexed files: `34`\n- Search returns ranked matches with:\n  - score\n  - file path\n  - content snippet\n\nExample hits:\n- `docs/architecture.md`\n- `docs/evidence/M2-crypto.md`\n- `.github/issues/M2-02-secure-endpoint-fetch-and-decrypt-aes-256-gcm.md`\n- `docs/workflows.md`\n- `docs/api.md`\n\n## M5-02 - workflow documentation\n- Updated `AGENTS.md` to require `bun run rag:search` before coding each issue.\n- Added `docs/agentic-workflow.md` with concise step-by-step and example commands.\n\n### Notes\n- local-only implementation\n- no external APIs or embeddings\n- run `rag:index` before `rag:search` to refresh index\n"
    },
    {
      "path": "docs/evidence/C0-performance.md",
      "content": "# Evidence: C0-performance.md\n\n## Scope\nPerformance smoke report for required backend actions (`/users/execute`, `/users/clear`) and baseline health route.\n\n## Method\n\nEnvironment used:\n- backend running locally on `127.0.0.1:3201`\n- temporary webhook mock on `127.0.0.1:7778` (fast deterministic responses)\n- secure endpoint kept live (real network call in execute flow)\n\nCommand loop (10 samples each):\n```bash\ncurl -s -o /dev/null -w \"%{time_total}\\n\" http://127.0.0.1:3201/health\ncurl -s -o /dev/null -w \"%{time_total}\\n\" -X POST http://127.0.0.1:3201/users/execute -H 'content-type: application/json' -d '{}'\ncurl -s -o /dev/null -w \"%{time_total}\\n\" -X POST http://127.0.0.1:3201/users/clear -H 'content-type: application/json' -d '{}'\n```\n\n## Results (10 samples)\n\n| Endpoint | Min (ms) | Avg (ms) | P95 (ms) | Max (ms) |\n|---|---:|---:|---:|---:|\n| `GET /health` | 0.412 | 0.974 | 4.721 | 4.721 |\n| `POST /users/execute` | 1284.636 | 1398.288 | 2210.098 | 2210.098 |\n| `POST /users/clear` | 0.884 | 1.296 | 1.785 | 1.785 |\n\n## Interpretation\n- `execute` is significantly slower because it includes a live fetch + AES decrypt path.\n- `clear` is near-instant in local setup due lightweight webhook response.\n- No timeout/retry exhaustion observed in this smoke run.\n\n## Suggested budget (local baseline)\n- `GET /health`: `< 50 ms`\n- `POST /users/clear`: `< 200 ms`\n- `POST /users/execute`: `< 3000 ms` (depends on secure endpoint network latency)\n\n"
    },
    {
      "path": "docs/evidence/C0-smoke.md",
      "content": "# Evidence: C0-smoke.md\n\n## Goal\nOne-command local smoke verification for required fullstack flow.\n\n## Script\n- `scripts/local-e2e-smoke.sh`\n\n## Covered checks\n1. PostgreSQL connectivity\n2. `users` table presence\n3. n8n webhook reachability\n4. backend `GET /health`\n5. backend `POST /users/execute`\n6. DB count growth after execute\n7. backend `POST /users/clear`\n8. DB count reset after clear\n\n## Usage\n```bash\nchmod +x scripts/local-e2e-smoke.sh\n./scripts/local-e2e-smoke.sh\n```\n\nOptional relaxed mode (diagnostic only):\n```bash\nSMOKE_STRICT_DB_GROWTH=0 ./scripts/local-e2e-smoke.sh\n```\n\n## Notes\n- Default mode is strict and fails if DB row count does not increase after execute.\n- This script is intended for final reviewer and release smoke checks.\n\n"
    },
    {
      "path": "docs/evidence/C0-security.md",
      "content": "# Evidence: C0-security.md\n\n## Objective\nFinal security hygiene check for repository delivery scope.\n\n## Commands executed\n```bash\nrg -n \"(AKIA[0-9A-Z]{16}|SECRET_KEY|PRIVATE KEY|BEGIN RSA|BEGIN OPENSSH|xox[baprs]-|ghp_[A-Za-z0-9]{36}|gho_[A-Za-z0-9]{36}|api[_-]?key\\\\s*[:=]|token\\\\s*[:=]|password\\\\s*[:=])\" --glob '!**/node_modules/**' --glob '!**/.git/**' . || true\ngit ls-files | rg '\\.env$|id_rsa|\\.pem$|credentials|secret' || true\nfind . -type f -name '.env.example' -maxdepth 5 -print -exec sed -n '1,160p' {} \\;\nbun -v\nnode -v\nbunx n8n --version\n```\n\n## Results\n- Secret-pattern scan in tracked files: no exposed production keys/tokens found.\n- No tracked `.env` files found.\n- `.env.example` files contain variable names and local development defaults only:\n  - `packages/backend/api/.env.example`\n  - `packages/frontend/web/.env.example`\n- Runtime versions captured:\n  - Bun: `1.3.9`\n  - Node: `v22.11.0`\n  - n8n: `2.8.3`\n\n## Findings\n1. No high-risk secret leakage detected in tracked repository files.\n2. Local development credentials are documented for reproducible setup (expected for test environment).\n\n## Pass/Fail\n- `PASS` with note:\n  - deployment phase must still keep real cloud secrets only in provider env vars (not in repo).\n\n"
    },
    {
      "path": "docs/evidence/M3-ui.md",
      "content": "# Evidence: M3-ui.md\n\n## M3-01 - React UI table and layout\n- Implemented responsive React UI.\n- UI contains:\n  - `<table>` with `nome/email/phone`\n  - button `Executar`\n  - button `Limpar`\n- Dynamic updates happen without page reload.\n\n## M3-02 - API integration\n- `Executar` calls `POST /users/execute` and updates table state.\n- `Limpar` calls `POST /users/clear` and clears table state.\n- Loading and error states implemented.\n\n## M3-03 - Jest component tests\n- Jest + React Testing Library tests cover:\n  - execute populates table\n  - clear empties table\n  - loading disables buttons\n\n## Commands\n```bash\ncd packages/frontend/web\nbun run dev\nbun run test\nbun run test:e2e\nbun run lint\nbun run typecheck\n```\n\n## Latest validation run (2026-02-18)\n```bash\nbun run test      # PASS\nbun run lint      # PASS\nbun run typecheck # PASS\n```\n\n## Latest E2E run (2026-02-19)\n```bash\nPATH=$HOME/.nvm/versions/node/v22.12.0/bin:$PATH bun run test:e2e\n# 2 passed (3.3s)\n```\n\n### Frontend test highlights\n- Jest + RTL state transitions:\n  - execute populates table\n  - clear empties table\n  - loading disables buttons\n- Playwright E2E (mocked API in browser route interception):\n  - execute renders rows in `<table>`\n  - clear restores empty state\n  - flow runs without page reload\n\n## Automated E2E suite\n- File: `packages/frontend/web/tests/e2e/execute-clear.spec.ts`\n- Config: `packages/frontend/web/playwright.config.mjs`\n- Runner:\n```bash\nbun run test:e2e\n```\n\n## E2E checklist\n- [x] start frontend app for E2E runner (`playwright.config.mjs` webServer)\n- [x] click `Executar` and verify rows rendered\n- [x] click `Limpar` and verify table empty\n- [x] repeat flow without page reload\n\n## Screenshot evidence\n- `docs/evidence/assets/m3-desktop-after-execute.png`\n- `docs/evidence/assets/m3-desktop-after-clear.png`\n- `docs/evidence/assets/m3-mobile-after-execute.png`\n"
    },
    {
      "path": "docs/evidence/M0-setup.md",
      "content": "# Evidence: M0-setup.md\n\n## Commands\n```bash\nbun -v\nbun install\nbun run test\n```\n\n## Outputs summary\n- Bun runtime available and used as package manager/executor.\n- Monorepo dependencies installed from root.\n- Root test command executes all workspace targets.\n\n## Tree summary\n- `packages/backend/api`\n- `packages/frontend/web`\n- `packages/shared/contracts`\n- `packages/tooling/rag`\n- `packages/tooling/workflows`\n- `docs/` and `docs/evidence/`\n- `instructions/`, `.codex/`, `.gemini/`, `AGENTS.md`\n"
    },
    {
      "path": "docs/evidence/M2-crypto.md",
      "content": "# Evidence: M2-crypto.md\n\n## Spec extraction and payload validation\n- Source used: `docs/spec/test-spec.pdf`.\n- Endpoint queried:\n  - `GET https://n8n-apps.nlabshealth.com/webhook/data-5dYbrVSlMVJxfmco`\n- Observed keys:\n  - top: `success`, `data`\n  - data: `algorithm`, `encrypted`, `secretKey`\n  - encrypted: `iv`, `authTag`, `encrypted`\n\n## Backend implementation\n### M2-01\n- Fastify/Bun skeleton with `GET /health`.\n\n### M2-02\n- AES-256-GCM decryptor (`Aes256GcmDecryptor`) with:\n  - nested payload support (`data.encrypted.*` + `data.secretKey`)\n  - `hex`/`base64` decoding support\n  - strict key-length validation and fail-closed errors\n- Secure endpoint client with timeout and safe error mapping.\n- Unit tests for base64 fixtures and nested hex payload fixtures.\n\n### M2-03\n- `POST /users/execute`: fetch -> decrypt -> n8n ingest -> return payload.\n- `POST /users/clear`: n8n clear -> `{ cleared: true }`.\n- Timeout + retry on n8n client:\n  - `HTTP_TIMEOUT_MS`\n  - `HTTP_RETRIES`\n- Consistent error envelope:\n  - `{ \"error\": { \"code\", \"message\", \"details?\" } }`\n\n### M2-04\n- Japa integration tests added for:\n  - `GET /health`\n  - `POST /users/execute`\n  - `POST /users/clear`\n- Deterministic Bun unit/integration tests remain for core components.\n\n## Commands\n```bash\nbun run test\nbun run lint\nbun run typecheck\n```\n\n## Latest validation run (2026-02-18)\n```bash\nbun run test      # PASS\nbun run lint      # PASS\nbun run typecheck # PASS\n```\n\n### Backend test highlights\n- Bun tests: `13 pass`, `0 fail`.\n- Japa tests: `3 passed` for:\n  - `GET /health`\n  - `POST /users/execute`\n  - `POST /users/clear`\n\n## Curl examples (localhost)\n```bash\ncurl -i http://localhost:3001/health\ncurl -i -X POST http://localhost:3001/users/execute -H 'content-type: application/json' -d '{}'\ncurl -i -X POST http://localhost:3001/users/clear -H 'content-type: application/json' -d '{}'\n```\n\n## C0-02 live contract check (2026-02-19)\n\nEnvironment used for deterministic live HTTP validation:\n- backend on `127.0.0.1:3101`\n- temporary webhook server on `127.0.0.1:7777` emulating n8n responses\n- secure endpoint live URL kept enabled\n\n### `GET /health` success\n```http\nHTTP/1.1 200 OK\n{\"status\":\"ok\"}\n```\n\n### `POST /users/execute` success\n```http\nHTTP/1.1 200 OK\n{\"users\":[{\"id\":1,\"nome\":\"Ana\",\"email\":\"ana@example.com\",\"phone\":\"+55 11 90000-0001\"},{\"id\":2,\"nome\":\"Beto\",\"email\":\"beto@example.com\",\"phone\":\"+55 11 90000-0002\"}]}\n```\n\n### `POST /users/clear` success\n```http\nHTTP/1.1 200 OK\n{\"cleared\":true}\n```\n\n### Controlled failure envelope (`/users/clear` with invalid webhook path)\n```http\nHTTP/1.1 400 Bad Request\n{\"error\":{\"code\":\"N8N_WEBHOOK_FAILED\",\"message\":\"Webhook do n8n retornou erro\",\"details\":{\"status\":404}}}\n```\n"
    },
    {
      "path": "docs/evidence/C0-final-hardening.md",
      "content": "# Evidence: C0-final-hardening.md\n\n## Goal\nFinalize repository hygiene and evaluator-ready docs for local-first delivery.\n\n## Completed actions\n- Hardened `.gitignore` strategy:\n  - keeps `bun.lock` tracked\n  - ignores non-Bun lockfiles (`package-lock.json`, `yarn.lock`, `pnpm-lock.yaml`, `npm-shrinkwrap.json`)\n  - keeps `.env` ignored and `.env.example` tracked\n- Hardened `start:all` behavior:\n  - auto-fallback to Node `22.12.0` from nvm when shell is on `22.11.x`\n  - checks only ports for enabled services (`INCLUDE_*` aware)\n- Removed seed-based local test path:\n  - deleted `scripts/seed-users.sh`\n  - removed root command `bun run seed:users`\n  - docs now enforce official acceptance path only (`/users/execute` and `/users/clear`)\n- Expanded setup docs with copy/paste flows, troubleshooting, and useful command index.\n- Expanded `README.md` with scope checklist, quickstart, manual e2e checks, and command catalog.\n- Hardened docs for operational clarity:\n  - `start:all` documented as daily runtime command after one-time bootstrap\n  - `docs/workflows.md` now explains production webhook URL mapping and dynamic path cases\n  - `docs/deploy.md` now includes click-by-click go-live sequence and rollback checklist\n- Implemented issue #60 (`start:all` readiness hardening):\n  - deterministic startup order: n8n -> backend -> frontend\n  - HTTP readiness gates for n8n and backend (`/health`)\n  - configurable timeout and poll interval:\n    - `STARTUP_MAX_WAIT_SEC`\n    - `STARTUP_POLL_INTERVAL_SEC`\n    - `N8N_READY_URL`\n    - `BACKEND_READY_URL`\n  - fail-fast on readiness timeout or early child process exit with actionable logs\n- Synchronized runbook docs with real production troubleshooting:\n  - placeholder URL mistake (`<path-real-ingest>`) documented\n  - direct n8n webhook smoke commands added\n  - backend execute/clear production smoke commands added\n- Added unified CD workflow for production deploy orchestration:\n  - backend deploy hook (Railway)\n  - n8n deploy hook (Railway)\n  - frontend deploy (Vercel)\n  - post-deploy smoke checks in one pipeline\n- Enforced strict challenge scope:\n  - frontend now exposes only `Executar` and `Limpar`\n  - seed/populate flow removed from UI and docs\n\n## Validation commands and outputs (2026-02-19)\n\n```bash\nbun run test\nbun run lint\nbun run typecheck\n```\n\nObserved:\n- `bun run test` -> success for all projects\n- `bun run lint` -> success for all projects\n- `bun run typecheck` -> success for all projects\n\n## Reliability matrix (issue #60)\n\n| Scenario | Command | Expected | Observed |\n|---|---|---|---|\n| Syntax validation | `bash -n scripts/start-all.sh` | shell script is valid | pass |\n| Backend readiness waits and fails fast when backend exits early | `INCLUDE_N8N=0 INCLUDE_FRONTEND=0 bun run start:all` | clear readiness log + non-zero exit | pass (`[readiness] backend process exited before becoming ready`) |\n| Forced bad backend readiness URL | `INCLUDE_N8N=0 INCLUDE_FRONTEND=0 BACKEND_READY_URL=http://127.0.0.1:9/health STARTUP_MAX_WAIT_SEC=4 bun run start:all` | readiness gate fails quickly with explicit reason | pass (explicit readiness failure) |\n\nReference startup logs (expected shape on healthy run):\n```text\n[stage 1/3] Starting n8n...\n[readiness] waiting for n8n: http://127.0.0.1:5678 (timeout 90s)\n[readiness] n8n ready (HTTP 200) after 4s.\n[stage 2/3] Starting backend...\n[readiness] waiting for backend: http://127.0.0.1:3001/health (timeout 90s)\n[readiness] backend ready (HTTP 200) after 1s.\n[stage 3/3] Starting frontend...\nAll enabled services started in dependency order. Press Ctrl+C to stop.\n```\n\n```bash\nbun run test:e2e\n```\n\nObserved:\n- `2 passed` (Playwright)\n\n```bash\ntimeout 8s env INCLUDE_N8N=0 INCLUDE_BACKEND=0 VITE_PORT=5181 bun run start:all\n```\n\nObserved:\n- frontend starts successfully via `start:all`\n- no immediate Node version gate failure in this path\n\n```bash\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"SELECT count(*) FROM users;\"\n```\n\nObserved:\n- count validation is performed only through execute/clear flow\n\n## End-to-end persistence proof (backend -> n8n -> postgres)\n\n```bash\ncurl -s -X POST http://127.0.0.1:3001/users/clear -H 'content-type: application/json' -d '{}'\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"SELECT count(*) AS after_clear FROM users;\"\n\ncurl -s -X POST http://127.0.0.1:3001/users/execute -H 'content-type: application/json' -d '{}'\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"SELECT count(*) AS after_execute FROM users;\"\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"SELECT id,nome,email,phone FROM users ORDER BY id ASC LIMIT 3;\"\n\ncurl -s -X POST http://127.0.0.1:3001/users/clear -H 'content-type: application/json' -d '{}'\nPGPASSWORD='Tst1320' psql -h localhost -U postgres -d hw_fullstack_db -c \"SELECT count(*) AS after_final_clear FROM users;\"\n```\n\nObserved:\n- `after_clear = 0`\n- `/users/execute` returned users payload\n- `after_execute = 50`\n- SQL sample rows returned valid `nome/email/phone`\n- final clear returned `after_final_clear = 0`\n\n## Deliverable checklist\n- [x] Cleanup/hardening changes applied\n- [x] `.gitignore` + `.env.example` policy explicit\n- [x] Setup docs include full useful command catalog\n- [x] Local validation commands documented and executed\n- [x] Acceptance path clarified as backend -> n8n -> postgres (`execute/clear`)\n- [x] Repository ready for evaluator local run\n"
    },
    {
      "path": "docs/evidence/M1-n8n.md",
      "content": "# Evidence: M1-n8n.md\n\n## Version checks\n```bash\nnode -v\nbun -v\nn8n --version\n```\n\n## Imported workflows\n- `ingest-users`\n- `list-users`\n- `clear-users`\n\n## Screenshot placeholders\n- `[ ] n8n canvas with ingest-users`\n- `[ ] n8n canvas with list-users`\n- `[ ] n8n canvas with clear-users`\n\n## Webhook URL summary\n- `POST http://localhost:5678/webhook/ingest-users`\n- `GET  http://localhost:5678/webhook/list-users`\n- `POST http://localhost:5678/webhook/clear-users`\n\n## C0-03 live verification notes (2026-02-19)\n\n### Environment used\n- n8n via `bunx n8n` (`2.8.3`) with `N8N_USER_FOLDER=/tmp/n8n-home`\n- local credential imported as `postgres-local` for database `hw_fullstack_db`\n- workflows imported from `packages/tooling/workflows/exported/*.json`\n\n### Commands executed\n```bash\ncat /tmp/n8n-home/.n8n/config\nN8N_USER_FOLDER=/tmp/n8n-home N8N_ENCRYPTION_KEY=10rqKJhukO76Y7HHBSGuhrf1Ps0MyRrl \\\n  bunx n8n import:credentials --input /tmp/n8n-postgres-credentials.json\nN8N_USER_FOLDER=/tmp/n8n-home N8N_ENCRYPTION_KEY=10rqKJhukO76Y7HHBSGuhrf1Ps0MyRrl \\\n  bunx n8n import:workflow --input packages/tooling/workflows/exported/ingest-users.json\nN8N_USER_FOLDER=/tmp/n8n-home N8N_ENCRYPTION_KEY=10rqKJhukO76Y7HHBSGuhrf1Ps0MyRrl \\\n  bunx n8n import:workflow --input packages/tooling/workflows/exported/list-users.json\nN8N_USER_FOLDER=/tmp/n8n-home N8N_ENCRYPTION_KEY=10rqKJhukO76Y7HHBSGuhrf1Ps0MyRrl \\\n  bunx n8n import:workflow --input packages/tooling/workflows/exported/clear-users.json\nN8N_USER_FOLDER=/tmp/n8n-home N8N_ENCRYPTION_KEY=10rqKJhukO76Y7HHBSGuhrf1Ps0MyRrl \\\n  bunx n8n publish:workflow --id sYR9JTbdNug0EIE6\ntimeout 8s N8N_USER_FOLDER=/tmp/n8n-home N8N_ENCRYPTION_KEY=10rqKJhukO76Y7HHBSGuhrf1Ps0MyRrl \\\n  N8N_PORT=5679 N8N_LISTEN_ADDRESS=127.0.0.1 bunx n8n start\n\n# 2026-02-19 retry in elevated environment\nINCLUDE_FRONTEND=0 bash scripts/start-all.sh\ncurl -s http://127.0.0.1:3001/health\ncurl -s -X POST http://127.0.0.1:3001/users/execute -H 'content-type: application/json' -d '{}'\ncurl -s -X POST http://127.0.0.1:3001/users/clear -H 'content-type: application/json' -d '{}'\n\n# inspect registered webhook paths in n8n sqlite\nbun -e 'import { Database } from \"bun:sqlite\"; const db=new Database(\"/tmp/n8n-home/.n8n/database.sqlite\",{readonly:true}); console.log(db.query(\"select workflowId,webhookPath,method from webhook_entity\").all())'\n```\n\n### Additional observed result (2026-02-19)\n- `scripts/start-all.sh` now autodetects n8n encryption key from `N8N_USER_FOLDER/.n8n/config`, fixing startup mismatch.\n- Backend and n8n start successfully in the same run.\n- n8n logs still show production webhooks unresolved in this environment:\n```text\nProcessed 6 draft workflows, 0 published workflows.\n```\n- Backend calls to `/users/execute` and `/users/clear` still return:\n```json\n{\"error\":{\"code\":\"N8N_WEBHOOK_FAILED\",\"message\":\"Webhook do n8n retornou erro\",\"details\":{\"status\":404}}}\n```\n\n### Observed result\n- Credentials and workflows imported successfully via CLI.\n- Publishing workflows works but requires restart to apply.\n- n8n server fails to bind the local port in this sandbox:\n```text\nn8n webserver failed, exiting listen EPERM: operation not permitted 127.0.0.1:5679\n```\n\n### Current status\n- Import/publish steps are reproducible.\n- Full live webhook execution is still blocked by n8n webhook registration (`404`) in this environment.\n- To close issue C0-03, run one final local proof in n8n UI: open each workflow, save + activate, copy production webhook URLs from UI, update backend `.env`, then rerun execute/clear and SQL checks.\n"
    },
    {
      "path": "docs/deploy.md",
      "content": "# Deployment\n\nThis repository uses a local-first validation baseline and a cloud-finalization path.\n\n## CI quality gate (GitHub Actions)\n\nWorkflow file:\n- `.github/workflows/ci.yml`\n\nRuns on push/PR to `develop` and `main`:\n- `bun install --frozen-lockfile`\n- `bun run test`\n- `bun run lint`\n- `bun run typecheck`\n- `bun run --cwd packages/frontend/web build`\n\n## Vercel deploy automation (GitHub Actions)\n\nWorkflow file:\n- `.github/workflows/vercel-deploy.yml`\n\nBehavior:\n- PR to `develop/main`: preview deploy job.\n- Push to `main`: production deploy job.\n- `workflow_dispatch`: manual rerun support.\n\nRequired GitHub repository secrets:\n- `VERCEL_TOKEN`\n- `VERCEL_ORG_ID`\n- `VERCEL_PROJECT_ID`\n- `VITE_API_BASE_URL` (recommended for production build context)\n\nImportant:\n- Jobs are gated by secrets presence; if missing, deploy jobs are skipped.\n- No Vercel credentials are stored in repository files.\n\n## Unified CD (3 deploys in sequence)\n\nWorkflow file:\n- `.github/workflows/release-deploy.yml`\n\nBehavior:\n- Trigger: push to `main` and manual dispatch.\n- Stage 1: trigger Railway backend deploy (deploy hook).\n- Stage 2: trigger Railway n8n deploy (deploy hook).\n- Stage 3: wait readiness for backend `/health` and n8n root URL.\n- Stage 4: build and deploy frontend to Vercel production.\n- Stage 5: production smoke (`/health`, frontend root, `/users/execute`, `/users/clear`).\n\nRequired GitHub secrets:\n- `RAILWAY_BACKEND_DEPLOY_HOOK_URL`\n- `RAILWAY_N8N_DEPLOY_HOOK_URL`\n- `VERCEL_TOKEN`\n- `VERCEL_ORG_ID`\n- `VERCEL_PROJECT_ID`\n\nRequired GitHub repository variables:\n- `PROD_BACKEND_URL` (example: `https://hw-fullstack-monorepo-production.up.railway.app`)\n- `PROD_N8N_URL` (example: `https://n8ndocker-production-7c03.up.railway.app`)\n- `PROD_FRONTEND_URL` (example: `https://hw-fullstack-monorepo-web.vercel.app`)\n\n## Backend (Fastify + Bun)\n\n### Recommended platforms\n- Railway\n- Render\n- Fly.io\n\n### Start command\n```bash\ncd packages/backend/api\nbun src/server.ts\n```\n\n### Step-by-step (click-by-click)\n1. Create backend service in Railway/Render/Fly from this repository.\n2. Set working directory to `packages/backend/api` (if platform requires monorepo root override).\n3. Set install command to `bun install`.\n4. Set start command to `bun src/server.ts`.\n5. Configure backend env vars (list below).\n6. Deploy and wait for healthy state.\n7. Validate `GET /health` on public URL.\n\n### Environment variables (backend)\n- `API_PORT`\n- `API_HOST`\n- `CORS_ORIGIN`\n- `SECURE_ENDPOINT_URL`\n- `N8N_WEBHOOK_INGEST_URL`\n- `N8N_WEBHOOK_LIST_URL`\n- `N8N_WEBHOOK_CLEAR_URL`\n- `HTTP_TIMEOUT_MS`\n- `HTTP_RETRIES`\n\n`CORS_ORIGIN` supports multiple origins as comma-separated values:\n```bash\nCORS_ORIGIN=https://your-prod-frontend.vercel.app,https://your-preview-frontend.vercel.app\n```\n\n### Post-deploy smoke test\n```bash\ncurl -i https://<backend-url>/health\ncurl -i -X POST https://<backend-url>/users/execute -H 'content-type: application/json' -d '{}'\ncurl -i -X POST https://<backend-url>/users/clear -H 'content-type: application/json' -d '{}'\n```\n\n### n8n production dependency\nBefore `/users/execute` and `/users/clear` can pass, production n8n must be ready:\n1. Create/import workflows (ingest/list/clear) in production n8n.\n2. Configure production Postgres credentials in workflow nodes.\n3. Activate workflows.\n4. Copy each webhook **Production URL** into backend env:\n   - `N8N_WEBHOOK_INGEST_URL`\n   - `N8N_WEBHOOK_LIST_URL`\n   - `N8N_WEBHOOK_CLEAR_URL`\n\n## Frontend (React + Vite)\n\n### Recommended platforms\n- Vercel\n- Netlify\n\n### Build command\n```bash\ncd packages/frontend/web\nbun run build\n```\n\n### Publish directory\n- `packages/frontend/web/dist`\n\n### Environment variable\n- `VITE_API_BASE_URL=https://<backend-url>`\n\n### Vercel deployment model\n- Recommended: Vercel Git integration (no custom GH Action required).\n- Project root: `packages/frontend/web`\n- Build command: `bun run build`\n- Output directory: `dist`\n- Install command: `bun install`\n\n### Vercel setup (click-by-click)\n1. In Vercel, import the GitHub repository.\n2. Set **Root Directory** to `packages/frontend/web`.\n3. Set **Framework Preset** to `Vite`.\n4. Set **Install Command** to `bun install`.\n5. Set **Build Command** to `bun run build`.\n6. Set **Output Directory** to `dist`.\n7. Add environment variable `VITE_API_BASE_URL=https://<backend-url>` for Preview and Production.\n8. Deploy once manually from Vercel UI to validate project linkage.\n9. Copy `VERCEL_ORG_ID` and `VERCEL_PROJECT_ID` into GitHub secrets.\n10. Add `VERCEL_TOKEN` in GitHub secrets.\n\n### Vercel environment variables\n- `VITE_API_BASE_URL=https://<backend-url>`\n\n### Frontend publish checks\n- Open frontend URL.\n- Click `Executar` and verify table fills.\n- Click `Limpar` and verify table clears without reload.\n\n## Ordered production go-live sequence\n1. Provision production Postgres.\n2. Deploy/configure production n8n (with Postgres credentials).\n3. Import/activate workflows and capture production webhook URLs.\n4. Deploy backend with production env vars (including webhook URLs).\n5. Smoke backend routes.\n6. Deploy frontend and point `VITE_API_BASE_URL` to backend.\n7. Validate full UI flow (`Executar` and `Limpar`).\n8. Register evidence in `docs/evidence/M4-deploy.md`.\n9. Confirm latest `main` run completed in:\n   - `.github/workflows/ci.yml`\n   - `.github/workflows/vercel-deploy.yml`\n\n## Rollback\nIf production smoke fails after a deploy:\n1. Frontend: rollback to previous successful deployment on Vercel/Netlify.\n2. Backend: rollback to previous successful deployment on Railway/Render/Fly.\n3. Reapply previous backend env set (especially `N8N_WEBHOOK_*`, `CORS_ORIGIN`, `VITE_API_BASE_URL` alignment).\n4. Re-run smoke checks on rolled-back versions.\n5. Open incident note in evidence doc with timestamp, failed check, rollback target and result.\n\n## Production troubleshooting: `Failed to fetch`\nIf frontend shows `Failed to fetch` after deploy:\n1. In Vercel project, verify `VITE_API_BASE_URL` is set to backend public URL (not localhost).\n2. In backend platform, verify `CORS_ORIGIN` includes the frontend Vercel domain.\n3. Run from terminal:\n```bash\ncurl -i https://<backend-url>/health\ncurl -i -X POST https://<backend-url>/users/execute -H 'content-type: application/json' -d '{}'\n```\n4. If backend curl works but browser still fails, inspect browser Network tab:\n   - status `0` / CORS error: fix `CORS_ORIGIN`\n   - DNS/TLS failure: verify backend URL in `VITE_API_BASE_URL`\n   - `4xx/5xx` with JSON error: backend is reachable, fix backend env/workflow\n\n## One-command production smoke\nUse this script to validate backend + n8n integration quickly.\n\n```bash\nBACKEND_URL=\"https://<backend-domain>\" \\\nN8N_BASE_URL=\"https://<n8n-domain>\" \\\nbun run smoke:prod\n```\n\nWhat it checks:\n- `GET /health`\n- `POST /users/execute`\n- `POST /users/clear`\n- n8n direct webhooks:\n  - `POST /webhook/ingest-users`\n  - `GET /webhook/list-users`\n  - `POST /webhook/clear-users`\n\nBuilt-in diagnostics:\n- DNS failure (`Could not resolve host`)\n- n8n webhook not active/registered (`404 ... webhook ... not registered`)\n- service not responding (`502 Application failed to respond`)\n"
    },
    {
      "path": "instructions/filter.instructions.md",
      "content": "---\napplyTo: \"**/*\"\n---\n\n# Scope Filter (Anti-Overengineering)\n\n- Do not add \"nice to have\" features not in the spec or current issue.\n- Avoid extra layers unless the issue demands it.\n- Prefer clarity over abstraction.\n- Keep RAG local-only (docs search), no external APIs, no embeddings unless explicitly required.\n"
    },
    {
      "path": "instructions/core.instructions.md",
      "content": "---\napplyTo: \"**/*\"\n---\n\n# Core Rules (Always Loaded)\n\n## Non-negotiable\n1) Work strictly issue-by-issue using `.github/issues/*.md`.\n2) Do not implement anything not requested by the current issue.\n3) Bun-first: run scripts/tests with Bun.\n4) Docker is OPTIONAL. Never require Docker to run locally.\n5) Runtime logs: PT-BR. Comments/docblocks: EN.\n6) Every issue must update `docs/evidence/*`.\n\n## Evidence format\n- Commands executed\n- Outputs or placeholders for screenshots\n- URLs when deployed\n"
    },
    {
      "path": ".github/issues/C0-03-n8n-postgres-persistence-and-truncate-verification.md",
      "content": "Title: Verify n8n workflow persistence and TRUNCATE behavior in PostgreSQL with live evidence\nMilestone: M6 - Delivery Audit & Signoff\nLabels: workflows,infra,qa\n\n## GitFlow Branch\n- feature/C0-03-n8n-postgres-verify\n\n## Goal\nConfirm the full data path from backend to n8n to PostgreSQL, including clear flow with TRUNCATE.\n\n## Functional Requirements\n- Execute live flow:\n  - run execute pipeline and confirm inserted/updated records\n  - run clear pipeline and confirm table reset\n- Validate DB state with SQL queries before/after.\n- Confirm `users` schema matches spec exactly.\n\n## Non-Functional Requirements\n- Evidence must be reproducible with copy/paste commands.\n- Avoid manual-only claims without command output.\n\n## Acceptance Criteria\n- `execute` results in persisted rows in `users`.\n- `clear` results in `count(*) = 0`.\n- Schema still matches required definition.\n\n## Deliverables / Evidence\n- Update `docs/evidence/M1-db.md` and `docs/evidence/M1-n8n.md` with:\n  - commands used\n  - SQL outputs\n  - webhook route confirmation\n\n"
    },
    {
      "path": ".github/issues/C0-12-seed-route-compat-hotfix.md",
      "content": "Title: Hotfix frontend/backward-compat for seed route not deployed in backend\nMilestone: C0 - Final Hardening\nLabels: frontend,backend,deploy,qa,docs\n\n## GitFlow Branch\n- feature/C0-12-seed-route-compat-hotfix\n\n## Goal\nPrevent misleading generic errors when frontend includes `Popular <N>` but production backend still does not expose `POST /users/seed`.\n\n## Functional Requirements\n- Improve frontend error parsing to read both `error.message` and top-level `message` from backend.\n- Add explicit user-facing message for seed route absence (`Route POST:/users/seed not found`).\n- Keep existing execute/clear flow unchanged.\n- Document diagnosis and hotfix in deploy evidence.\n\n## Acceptance Criteria\n- Clicking `Popular <N>` against backend without `/users/seed` shows a clear compatibility message.\n- Generic message `Falha de comunicacao com backend` is reduced for parseable backend errors.\n- Tests and quality checks are green.\n\n## Deliverables / Evidence\n- `packages/frontend/web/src/App.tsx`\n- `packages/frontend/web/tests/app.jest.test.js`\n- `docs/evidence/M4-deploy.md`\n"
    },
    {
      "path": ".github/issues/M1-03-users-sql-schema-from-spec.md",
      "content": "Title: Add Postgres schema exactly as required by the test spec\nMilestone: M1 - Local Infra + n8n/Postgres\nLabels: infra,docs\n\n## GitFlow Branch\n- feature/M1-03-users-sql-schema\n\n## Goal\nEnsure the project uses the exact `users` table schema required by the spec.\n\n## Functional Requirements\n- Create/replace `infra/sql/users.sql` with:\n  - `id SERIAL PRIMARY KEY`\n  - `nome VARCHAR(128) NOT NULL`\n  - `email VARCHAR(255) UNIQUE NOT NULL`\n  - `phone VARCHAR(20) NOT NULL`\n- Add a short verification query section in docs.\n\n## Non-Functional Requirements\n- No Docker required.\n- Must work on Linux and WSL.\n\n## Acceptance Criteria\n- Running `psql ... -f infra/sql/users.sql` succeeds.\n- `SELECT * FROM users LIMIT 1;` works.\n\n## Deliverables / Evidence\n- `docs/evidence/M1-db.md` includes:\n  - commands used\n  - output of `\\d users`\n  - output of `SELECT count(*) FROM users;`\n"
    },
    {
      "path": ".github/issues/M5-02-agentic-rag-workflow-doc.md",
      "content": "Title: Document agentic workflow using rag:search before implementing each issue\nMilestone: M5 - Bonus RAG-ready Docs Search\nLabels: docs,rag\n\n## GitFlow Branch\n- feature/M5-02-rag-workflow-doc\n\n## Goal\nMake the agentic process explicit and consistent.\n\n## Functional Requirements\n- Update `AGENTS.md` to require:\n  - run `bun run rag:search` before coding\n  - add evidence entry per issue\n- Add `docs/agentic-workflow.md` with examples.\n\n## Non-Functional Requirements\n- Must remain lightweight and non-bureaucratic\n\n## Acceptance Criteria\n- Documentation is clear and directly usable.\n\n## Deliverables / Evidence\n- `docs/evidence/M5-rag.md` updated\n"
    },
    {
      "path": ".github/issues/M4-04-vercel-deploy-and-ci-pipeline.md",
      "content": "Title: Add Vercel deployment + CI pipeline (quality gate + smoke checks)\nMilestone: M4 - Deploy + Evidence Pack\nLabels: deploy,frontend,backend,ci,docs\n\n## GitFlow Branch\n- feature/M4-04-vercel-ci-pipeline\n\n## Goal\nFinalize cloud readiness by deploying frontend to Vercel and enforcing CI checks on every PR.\n\n## Functional Requirements\n- Add CI workflow in `.github/workflows/ci.yml` to run on push/PR:\n  - `bun install`\n  - `bun run test`\n  - `bun run lint`\n  - `bun run typecheck`\n  - optional frontend e2e step (`bun run test:e2e`) with a clear flag to disable if runner constraints exist.\n- Add a frontend deploy workflow for Vercel (or document Vercel Git integration path):\n  - production deploy from `main`\n  - preview deploy for PRs\n- Document required Vercel environment variables and where to configure them:\n  - `VITE_API_BASE_URL`\n- Document backend CORS requirement for deployed frontend domain.\n\n## Non-Functional Requirements\n- No secrets committed.\n- CI runtime should stay reasonably fast and deterministic.\n- Keep Bun-first commands only.\n\n## Acceptance Criteria\n- Every PR shows CI status with test/lint/typecheck passing.\n- Frontend has public Vercel URL connected to backend URL.\n- README includes live URLs and quick verification steps.\n- `docs/evidence/M4-deploy.md` updated with:\n  - Vercel project name\n  - deployed URLs (preview + production)\n  - CI run links/screenshots placeholders\n\n## Deliverables / Evidence\n- `.github/workflows/ci.yml`\n- `.github/workflows/vercel-deploy.yml` (or documented Git integration alternative)\n- `docs/deploy.md` and `README.md` updated\n- `docs/evidence/M4-deploy.md` updated with proof\n"
    },
    {
      "path": ".github/issues/M1-04-export-n8n-workflows-placeholders.md",
      "content": "Title: Add exported n8n workflow JSONs (ingest/list/clear) + import instructions\nMilestone: M1 - Local Infra + n8n/Postgres\nLabels: workflows,docs\n\n## GitFlow Branch\n- feature/M1-04-n8n-workflows\n\n## Goal\nProvide reproducible n8n workflows: ingest users, list users, clear users (TRUNCATE).\n\n## Functional Requirements\n- Add workflow JSON exports under:\n  - `packages/tooling/workflows/exported/ingest-users.json`\n  - `packages/tooling/workflows/exported/list-users.json`\n  - `packages/tooling/workflows/exported/clear-users.json`\n- Document how to import them in `docs/workflows.md`.\n- Ensure clear workflow performs a TRUNCATE on `users`.\n\n## Non-Functional Requirements\n- Workflows must be readable and minimal.\n- No secrets committed.\n\n## Acceptance Criteria\n- A user can import workflows into n8n UI and execute them.\n- Postgres nodes are configurable via n8n credentials.\n\n## Deliverables / Evidence\n- `docs/evidence/M1-n8n.md` with:\n  - n8n version\n  - imported workflows list (screenshots placeholders)\n  - webhook URLs documented\n"
    },
    {
      "path": ".github/issues/M4-01-deploy-backend-to-cloud.md",
      "content": "Title: Deploy backend to cloud platform (Railway/Render/Fly/Heroku) and document steps\nMilestone: M4 - Deploy + Evidence Pack\nLabels: deploy,backend,docs\n\n## GitFlow Branch\n- feature/M4-01-deploy-backend\n\n## Goal\nDeploy backend publicly and document how to reproduce.\n\n## Functional Requirements\n- Choose a cloud platform and deploy backend.\n- Configure env vars securely on the platform.\n- Add CORS config so frontend can call backend.\n\n## Non-Functional Requirements\n- No secrets in repo\n- Stable URL\n\n## Acceptance Criteria\n- Backend URL online, `/health` returns 200.\n\n## Deliverables / Evidence\n- `docs/evidence/M4-deploy.md` includes:\n  - platform used\n  - deployed URL\n  - env var list (names only)\n  - curl output for `/health`\n"
    },
    {
      "path": ".github/issues/M3-01-react-ui-table-and-layout.md",
      "content": "Title: Implement responsive React UI with <table> and two buttons (Executar/Limpar)\nMilestone: M3 - Frontend UX + Integration\nLabels: frontend,docs\n\n## GitFlow Branch\n- feature/M3-01-react-ui-table\n\n## Goal\nImplement the required UI: a `<table>` populated dynamically and 2 buttons.\n\n## Functional Requirements\n- UI must include:\n  - `<table>` for users (nome/email/phone)\n  - Button \"Executar\"\n  - Button \"Limpar\"\n- UI updates dynamically (no reload) after any action.\n\n## Non-Functional Requirements\n- Responsive layout\n- Accessible buttons and table semantics\n\n## Acceptance Criteria\n- UI renders correctly on mobile and desktop widths.\n- Table updates without page refresh.\n\n## Deliverables / Evidence\n- `docs/evidence/M3-ui.md` includes screenshots placeholders and dev run logs\n"
    },
    {
      "path": ".github/issues/C0-09-start-all-deploy-docs-hardening.md",
      "content": "Title: Harden docs for start:all-only local flow, n8n webhook mapping, and click-by-click deploy with rollback\nMilestone: C0 - Final Hardening\nLabels: docs,qa,chore\n\n## GitFlow Branch\n- feature/C0-09-start-all-deploy-docs-hardening\n\n## Goal\nClose final documentation gaps for evaluator reproducibility and deployment safety.\n\n## Functional Requirements\n- Update `README.md` with explicit one-time bootstrap dependency for `start:all`.\n- Update `PROJECT-SETUP.md` with deterministic one-time setup and daily `start:all` path.\n- Update `docs/workflows.md` with production URL mapping and dynamic webhook guidance.\n- Update `docs/deploy.md` with ordered go-live sequence, smoke checks, and rollback actions.\n- Update evidence for this hardening issue.\n\n## Non-Functional Requirements\n- Keep docs concise but copy/paste friendly.\n- Keep instructions Linux/WSL friendly.\n- No secrets committed.\n\n## Acceptance Criteria\n- A reviewer can follow docs and run full local flow with `start:all` for daily operation.\n- n8n webhook path troubleshooting is explicit (`404 webhook not registered` case).\n- Deploy docs include step order and rollback checklist.\n\n## Deliverables / Evidence\n- `README.md`\n- `PROJECT-SETUP.md`\n- `docs/workflows.md`\n- `docs/deploy.md`\n- `docs/evidence/C0-final-hardening.md`\n"
    },
    {
      "path": ".github/issues/C0-10-production-seed-dataset-rag-docs-sync.md",
      "content": "Title: Add production seed dataset flow, persist verification, and docs/rag synchronization\nMilestone: C0 - Final Hardening\nLabels: backend,frontend,docs,qa,rag\n\n## GitFlow Branch\n- feature/C0-10-production-seed-dataset-rag-docs-sync\n\n## Goal\nAllow controlled insertion of a configurable amount of fictitious users through the existing backend -> n8n -> PostgreSQL production flow, and align docs/RAG with the final runbook.\n\n## Functional Requirements\n- Add backend endpoint `POST /users/seed` with payload `{ count: number }`.\n- Generate deterministic fictitious users (`nome/email/phone`) and persist using existing n8n ingest/list flow.\n- Frontend must provide a quantity field + action button to trigger seed flow and update table dynamically.\n- Keep execute/clear behavior unchanged.\n- Update API and setup docs with copy/paste commands for production seed validation.\n- Reindex RAG after docs updates.\n\n## Non-Functional Requirements\n- Bun-first commands only.\n- No secrets in repository.\n- Keep error envelope consistency.\n\n## Acceptance Criteria\n- Calling `POST /users/seed` with `count > 0` returns persisted users payload.\n- Frontend can seed `N` records and render them without page reload.\n- `bun run test`, `bun run lint`, `bun run typecheck` are green.\n- `bun run rag:index` runs and `packages/tooling/rag/rag/index.json` is updated.\n\n## Deliverables / Evidence\n- `packages/backend/api/src/**`\n- `packages/frontend/web/src/**`\n- `docs/api.md`\n- `docs/workflows.md`\n- `PROJECT-SETUP.md`\n- `docs/evidence/C0-final-hardening.md`\n- `docs/evidence/M4-deploy.md`\n- `docs/evidence/M5-rag.md`\n"
    },
    {
      "path": ".github/issues/C0-07-security-and-secrets-hygiene-final-audit.md",
      "content": "Title: Run final security hygiene audit (secrets, env handling, dependency/runtime checks)\nMilestone: M6 - Delivery Audit & Signoff\nLabels: security,qa,chore\n\n## GitFlow Branch\n- feature/C0-07-security-hygiene\n\n## Goal\nEnsure no accidental secret exposure and validate secure defaults before final submission.\n\n## Functional Requirements\n- Verify no secrets are committed in repository files/history scope being delivered.\n- Confirm `.env.example` exposes names only (no private values).\n- Confirm docs do not leak credentials or tokens.\n- Record dependency/runtime versions used in final validation.\n\n## Non-Functional Requirements\n- Keep report concise and actionable.\n- If a finding exists, include fix and retest note.\n\n## Acceptance Criteria\n- Secret scan result documented.\n- No real tokens/passwords embedded in tracked files.\n- Final audit file states pass/fail with rationale.\n\n## Deliverables / Evidence\n- `docs/evidence/C0-security.md`\n\n"
    },
    {
      "path": ".github/issues/M0-01-init-bun-monorepo.md",
      "content": "Title: Initialize Bun + Lerna monorepo structure (agentic-ready)\nMilestone: M0 - Bootstrap & Standards\nLabels: epic,chore,docs\n\n## Goal\nCreate a clean Bun monorepo (Lerna) that separates backend, frontend and shared packages, plus agentic instruction folders.\n\n## Functional Requirements\n- Create the repository tree:\n  - `packages/backend/api`\n  - `packages/frontend/web`\n  - `packages/shared/contracts`\n  - `packages/tooling/rag`\n  - `packages/tooling/workflows`\n  - `docs/`, `docs/evidence/`\n  - `instructions/`, `.codex/`, `.gemini/`, `AGENTS.md`\n  - `.github/issues/`, PR template\n- Add root scripts:\n  - `dev`, `test`, `lint`, `typecheck`, `rag:index`, `rag:search`, `gh:bootstrap`\n\n## Non-Functional Requirements\n- Bun-first tooling\n- No secrets committed\n- Docker is optional only (do not require it)\n\n## Acceptance Criteria\n- `bun install` works at root\n- `bun run test` runs all packages (may be empty test placeholders)\n- Repo contains `README.md` and `PROJECT-SETUP.md` (initial content)\n\n## Deliverables / Evidence\n- `docs/evidence/M0-setup.md` with:\n  - `bun -v`, `bun install`, `bun run test` outputs\n  - tree snapshot or summary\n\n## Repo Areas\n- Root `package.json`, `lerna.json`, `tsconfig.base.json`\n- `packages/*`, `docs/*`, `instructions/*`, `.codex/*`, `.gemini/*`\n"
    },
    {
      "path": ".github/issues/M3-03-jest-component-tests.md",
      "content": "Title: Add Jest tests for UI state transitions (execute/clear)\nMilestone: M3 - Frontend UX + Integration\nLabels: frontend,testing\n\n## GitFlow Branch\n- feature/M3-03-jest-tests\n\n## Goal\nAdd basic UI tests to validate dynamic behavior without real backend calls.\n\n## Functional Requirements\n- Mock API client\n- Test:\n  - execute populates table\n  - clear empties table\n  - loading disables buttons\n\n## Non-Functional Requirements\n- Tests deterministic and fast\n\n## Acceptance Criteria\n- `bun run test` passes from root\n\n## Deliverables / Evidence\n- `docs/evidence/M3-ui.md` includes test output\n"
    },
    {
      "path": ".github/issues/M0-02-agentic-instructions-policy-pack.md",
      "content": "Title: Add agentic instruction packs (Codex/Gemini/Copilot) + personas\nMilestone: M0 - Bootstrap & Standards\nLabels: docs,chore\n\n## Functional Requirements\n- Add `instructions/*.instructions.md` policy packs:\n  - core, personas, backend, frontend, testing, security, scripts, rag, filter\n- Add `.codex/` and `.gemini/` adapters pointing to the core policies\n- Add `AGENTS.md` describing the issue-by-issue workflow\n\n## Non-Functional Requirements\n- Rules must prevent scope creep (\"no features not requested by the current issue\")\n- Must specify language policy: runtime logs PT-BR, comments/docblocks EN\n\n## Acceptance Criteria\n- Policies exist and are discoverable\n- `AGENTS.md` clearly describes branch/PR and evidence process\n\n## Deliverables / Evidence\n- `docs/evidence/M0-policy.md` linking all policies and explaining how to use them\n\n## Repo Areas\n- `instructions/*`, `.codex/*`, `.gemini/*`, `AGENTS.md`\n"
    },
    {
      "path": ".github/issues/M4-03-final-e2e-evidence-pack.md",
      "content": "Title: Produce final evidence pack and update README with live URLs\nMilestone: M4 - Deploy + Evidence Pack\nLabels: docs,chore\n\n## GitFlow Branch\n- feature/M4-03-evidence-pack\n\n## Goal\nFinalize documentation and evidence so evaluators can verify quickly.\n\n## Functional Requirements\n- Update `README.md` with:\n  - frontend URL\n  - backend URL\n  - short usage steps\n- Ensure `PROJECT-SETUP.md` is accurate for Linux and WSL.\n- Fill `docs/evidence/M4-deploy.md` with final proofs.\n\n## Non-Functional Requirements\n- Documentation must be concise and reproducible.\n\n## Acceptance Criteria\n- A reviewer can run locally or validate online with minimal steps.\n\n## Deliverables / Evidence\n- Completed evidence files under `docs/evidence/`\n"
    },
    {
      "path": ".github/issues/C0-04-frontend-dynamic-behavior-and-responsive-proof.md",
      "content": "Title: Validate frontend dynamic table behavior and responsive UX with execution evidence\nMilestone: M6 - Delivery Audit & Signoff\nLabels: frontend,qa,docs\n\n## GitFlow Branch\n- feature/C0-04-frontend-ux-proof\n\n## Goal\nProve that required frontend interactions work dynamically (no reload) and are responsive.\n\n## Functional Requirements\n- Validate user flows:\n  - click `Executar` and confirm table rows render from backend response\n  - click `Limpar` and confirm rows disappear without page reload\n- Capture responsive proof for desktop and mobile viewport.\n- Confirm buttons and table semantics remain accessible.\n\n## Non-Functional Requirements\n- Keep screenshot set minimal and informative.\n- Include timestamps and environment used.\n\n## Acceptance Criteria\n- Dynamic updates happen without reloading page.\n- Visual evidence exists for desktop and mobile states.\n\n## Deliverables / Evidence\n- Update `docs/evidence/M3-ui.md` with:\n  - E2E checklist marked with actual results\n  - screenshot references/placeholders replaced where possible\n\n"
    },
    {
      "path": ".github/issues/M5-01-rag-index-and-search-cli.md",
      "content": "Title: Implement local RAG-like docs index + search CLI for repo documentation\nMilestone: M5 - Bonus RAG-ready Docs Search\nLabels: rag,tooling,docs\n\n## GitFlow Branch\n- feature/M5-01-rag-cli\n\n## Goal\nProvide a local RAG-like tool to index repo docs and search them quickly.\n\n## Functional Requirements\n- Implement:\n  - `bun run rag:index` -> creates a JSON index from `docs/` + `instructions/` + `.github/issues/`\n  - `bun run rag:search \"<query>\"` -> returns ranked matches with file paths and snippets\n- Store index under `packages/tooling/rag/rag/index.json`\n\n## Non-Functional Requirements\n- No external services\n- Fast execution\n\n## Acceptance Criteria\n- Search returns relevant hits for queries like \"AES-256-GCM\" and \"TRUNCATE users\".\n\n## Deliverables / Evidence\n- `docs/evidence/M5-rag.md` with:\n  - index generation output\n  - sample searches\n"
    },
    {
      "path": ".github/issues/C0-01-scope-traceability-and-gap-audit.md",
      "content": "Title: Create final scope traceability matrix and identify remaining delivery gaps\nMilestone: M6 - Delivery Audit & Signoff\nLabels: docs,qa,chore\n\n## GitFlow Branch\n- feature/C0-01-scope-traceability\n\n## Goal\nProduce a requirement-by-requirement traceability map from test scope to code/docs/evidence and list objective gaps.\n\n## Functional Requirements\n- Create `docs/evidence/C0-traceability.md` with a matrix:\n  - scope requirement\n  - implementation reference (file/path)\n  - validation evidence (command/output/link)\n  - status: done / partial / missing\n- Include explicit section for blocking gaps and owner/action.\n\n## Non-Functional Requirements\n- Keep matrix concise and reviewer-friendly.\n- No ambiguous language.\n\n## Acceptance Criteria\n- Every requirement in the test prompt appears in the matrix.\n- Each row has concrete code/doc references.\n- Any pending item has a clear next action.\n\n## Deliverables / Evidence\n- `docs/evidence/C0-traceability.md`\n\n"
    },
    {
      "path": ".github/issues/M4-02-deploy-frontend-to-cloud.md",
      "content": "Title: Deploy frontend (Vercel/Netlify) pointing to deployed backend\nMilestone: M4 - Deploy + Evidence Pack\nLabels: deploy,frontend,docs\n\n## GitFlow Branch\n- feature/M4-02-deploy-frontend\n\n## Goal\nDeploy frontend and connect it to the deployed backend.\n\n## Functional Requirements\n- Deploy frontend\n- Configure `VITE_API_BASE_URL` (or equivalent)\n- Ensure UI can execute and clear flows\n\n## Non-Functional Requirements\n- Responsive UX on mobile\n- Stable URL\n\n## Acceptance Criteria\n- Public URL shows table and buttons.\n- Execute and clear works end-to-end.\n\n## Deliverables / Evidence\n- `docs/evidence/M4-deploy.md` includes:\n  - frontend URL\n  - backend URL\n  - screenshots placeholders\n"
    },
    {
      "path": ".github/issues/M1-02-run-n8n-locally-no-docker.md",
      "content": "Title: Run n8n locally via Node (no Docker) + import workflows\nMilestone: M1 - Local Infra + n8n/Postgres\nLabels: workflows,docs\n\n## Functional Requirements\n- Document Node installation (NVM recommended) for Linux/WSL\n- Document installing and running n8n without Docker\n- Provide workflow export placeholders under `packages/tooling/workflows/exported/`\n- Document how to import workflows in n8n UI\n\n## Non-Functional Requirements\n- Keep instructions short and accurate\n- No platform-specific assumptions beyond Linux/WSL\n\n## Acceptance Criteria\n- n8n UI reachable locally\n- Workflows can be imported\n\n## Deliverables / Evidence\n- `docs/evidence/M1-n8n.md` with:\n  - `node -v`, `bun -v`, `n8n --version` outputs\n  - screenshot placeholders\n  - webhook URLs summary\n\n## Repo Areas\n- `packages/tooling/workflows/exported/*`, `docs/workflows.md`, `PROJECT-SETUP.md`\n"
    },
    {
      "path": ".github/issues/C0-11-unified-cd-three-deploys.md",
      "content": "Title: Add unified CD pipeline for backend + n8n + frontend deploy with production smoke checks\nMilestone: C0 - Final Hardening\nLabels: deploy,ci,backend,frontend,workflows,qa,docs\n\n## GitFlow Branch\n- feature/C0-11-unified-cd-three-deploys\n\n## Goal\nProvide one production pipeline that triggers all three deploys (Railway backend, Railway n8n, Vercel frontend) and validates runtime health/smoke in sequence.\n\n## Functional Requirements\n- Add GitHub Actions workflow to run on `push` to `main` and manual dispatch.\n- Trigger Railway backend and n8n deployments via deploy hooks.\n- Trigger Vercel production deploy.\n- Run post-deploy smoke checks:\n  - backend `/health`\n  - n8n root URL\n  - backend `/users/execute`\n  - backend `/users/clear`\n- Fail pipeline if any required secret is missing or smoke check fails.\n\n## Non-Functional Requirements\n- Keep secrets only in GitHub Actions secrets/vars.\n- Keep pipeline deterministic and observable.\n- Keep docs copy/paste-friendly.\n\n## Acceptance Criteria\n- Main push can trigger deploy for all three services in one workflow.\n- Pipeline logs clearly show each stage status.\n- Documentation lists required secrets/vars and troubleshooting.\n\n## Deliverables / Evidence\n- `.github/workflows/release-deploy.yml`\n- `docs/deploy.md`\n- `docs/evidence/M4-deploy.md`\n- `docs/evidence/C0-final-hardening.md`\n- `docs/evidence/M5-rag.md`\n"
    },
    {
      "path": ".github/issues/M1-01-local-postgres-setup-no-docker.md",
      "content": "Title: Local Postgres setup (Linux/WSL) and schema initialization (no Docker)\nMilestone: M1 - Local Infra + n8n/Postgres\nLabels: infra,docs\n\n## Functional Requirements\n- Document Postgres installation for Linux and WSL\n- Provide SQL schema file `infra/sql/users.sql` matching the required table\n- Provide environment examples (no secrets)\n\n## Non-Functional Requirements\n- Docker must remain optional\n- Setup must be reproducible\n\n## Acceptance Criteria\n- User can create `hw_db` and apply `users.sql` successfully\n\n## Deliverables / Evidence\n- `docs/evidence/M1-db.md` with:\n  - install steps\n  - `psql` commands used\n  - verification query output (e.g. SELECT count(*) FROM users;)\n\n## Repo Areas\n- `infra/sql/users.sql`, `PROJECT-SETUP.md`, `docs/evidence/M1-db.md`\n"
    },
    {
      "path": ".github/issues/C0-14-strict-scope-remove-seed-ui.md",
      "content": "Title: Enforce original test scope by removing seed/populate flow from UI, API docs and smoke references\nMilestone: C0 - Final Hardening\nLabels: frontend,backend,docs,qa\n\n## GitFlow Branch\n- feature/C0-14-strict-scope-remove-seed-ui\n\n## Goal\nMatch delivery strictly to the original challenge scope: only `Executar` and `Limpar` flows.\n\n## Functional Requirements\n- Remove `Popular <N>` UI flow from frontend.\n- Remove `/users/seed` route usage from frontend.\n- Remove backend `/users/seed` route wiring and seed use case references.\n- Keep mandatory flows:\n  - `POST /users/execute`\n  - `POST /users/clear`\n- Update docs and evidence that mention seed/populate flow.\n\n## Non-Functional Requirements\n- Keep test suite green.\n- Keep error envelope and dynamic table behavior.\n- No secrets in repo.\n\n## Acceptance Criteria\n- UI has only two buttons: `Executar` and `Limpar`.\n- Backend route map no longer exposes `/users/seed`.\n- Documentation reflects strict original scope.\n- `bun run test`, `bun run lint`, `bun run typecheck` pass.\n\n## Deliverables / Evidence\n- `packages/frontend/web/src/App.tsx`\n- `packages/frontend/web/tests/app.jest.test.js`\n- `packages/backend/api/src/presentation/routes/users-routes.ts`\n- docs updates in `docs/api.md`, `docs/deploy.md`, `docs/workflows.md`, `docs/evidence/*`\n"
    },
    {
      "path": ".github/issues/M2-03-n8n-webhook-forward-ingest-and-return-users.md",
      "content": "Title: Forward decrypted users to n8n ingest webhook and return persisted users to frontend\nMilestone: M2 - Crypto + Backend Use Cases\nLabels: backend,workflows,testing\n\n## GitFlow Branch\n- feature/M2-03-n8n-forward-ingest\n\n## Goal\nBackend must forward decrypted users to n8n webhook so n8n stores in Postgres and returns persisted users.\n\n## Functional Requirements\n- Add endpoint `POST /users/execute`\n  - fetch secure endpoint\n  - decrypt AES-256-GCM\n  - POST decrypted users to `N8N_WEBHOOK_INGEST_URL`\n  - return response payload to frontend\n- Add endpoint `POST /users/clear`\n  - call `N8N_WEBHOOK_CLEAR_URL`\n  - return `{ cleared: true }`\n\n## Non-Functional Requirements\n- Timeouts and retries (e.g. 3 attempts) for n8n webhook calls\n- Return consistent error format\n\n## Acceptance Criteria\n- Manual E2E: clicking \"Executar\" populates table\n- Manual E2E: clicking \"Limpar\" clears table and truncates DB\n\n## Deliverables / Evidence\n- `docs/evidence/M2-crypto.md` includes:\n  - curl examples to `/users/execute` and `/users/clear`\n  - response samples (redacted where needed)\n"
    },
    {
      "path": ".github/issues/C0-05-cloud-deploy-signoff-and-live-url-publication.md",
      "content": "Title: Complete cloud deployment signoff and publish final live URLs in README and evidence\nMilestone: M6 - Delivery Audit & Signoff\nLabels: deploy,qa,docs\n\n## GitFlow Branch\n- feature/C0-05-deploy-signoff\n\n## Goal\nClose all remaining deployment gaps and provide reviewer-ready public URLs with proof.\n\n## Functional Requirements\n- Deploy backend publicly (Railway/Render/Fly/Heroku equivalent).\n- Deploy frontend publicly (Vercel/Netlify equivalent) pointing to deployed backend.\n- Replace all `PENDING` deployment placeholders in docs.\n- Add live curl proofs for backend endpoints.\n\n## Non-Functional Requirements\n- No secrets committed.\n- URLs must be stable and directly testable.\n\n## Acceptance Criteria\n- `README.md` shows working frontend and backend URLs.\n- `docs/evidence/M4-deploy.md` contains platform, URLs, env var names, and curl outputs.\n- Reviewer can run quickcheck end-to-end from public URLs.\n\n## Deliverables / Evidence\n- Updated `README.md`\n- Updated `docs/evidence/M4-deploy.md`\n\n"
    },
    {
      "path": ".github/issues/C0-60-start-all-readiness-checks.md",
      "content": "Title: Improve start:all with dependency-aware orchestration and readiness checks\nMilestone: C0 - Final Hardening\nLabels: infra,chore,qa\n\n## GitFlow Branch\n- feature/C0-60-start-all-readiness\n\n## Goal\nMake local startup deterministic so `bun run start:all` starts services in order with readiness checks.\n\n## Functional Requirements\n- Keep one command entrypoint (`bun run start:all`).\n- Start order with readiness checks:\n  1. n8n\n  2. backend\n  3. frontend\n- Add configurable wait/retry logic for:\n  - n8n URL availability\n  - backend `/health` availability\n- Provide explicit logs for each readiness stage.\n- Fail fast with clear reason on timeout.\n\n## Non-Functional Requirements\n- Bun-first commands only.\n- Linux/WSL compatible.\n- No Docker required for local baseline.\n\n## Acceptance Criteria\n- `bun run start:all` reliably starts all services in order.\n- If n8n is unavailable, script exits with actionable error and no orphan processes.\n- `PROJECT-SETUP.md` includes behavior and troubleshooting notes.\n\n## Deliverables / Evidence\n- `scripts/start-all.sh`\n- `PROJECT-SETUP.md`\n- `docs/evidence/C0-final-hardening.md`\n"
    },
    {
      "path": ".github/issues/M2-01-fastify-bun-ddd-skeleton.md",
      "content": "Title: Implement Bun + Fastify backend skeleton with DDD boundaries and health endpoint\nMilestone: M2 - Crypto + Backend Use Cases\nLabels: backend,testing,docs\n\n## GitFlow Branch\n- feature/M2-01-fastify-bun-skeleton\n\n## Goal\nCreate a Bun runtime backend using Fastify, organized in DDD layers.\n\n## Functional Requirements\n- Create Fastify server entrypoint with:\n  - `GET /health` returning `{ status: \"ok\" }`\n- Define DDD-ish structure:\n  - `domain/` entities + value objects (minimal)\n  - `application/` use cases\n  - `infrastructure/` adapters (http clients)\n  - `presentation/` controllers/routes\n- Add basic config loading from `.env` (no secrets committed)\n\n## Non-Functional Requirements\n- Fast startup time\n- Clear error handling boundaries\n\n## Acceptance Criteria\n- `bun run dev` starts server\n- `GET /health` returns 200\n\n## Deliverables / Evidence\n- `docs/evidence/M2-crypto.md` includes:\n  - `bun -v`\n  - server startup log\n  - curl output for `/health`\n"
    },
    {
      "path": ".github/issues/C0-02-backend-live-execute-clear-contract-check.md",
      "content": "Title: Validate backend live contract for /health, /users/execute, /users/clear against scope\nMilestone: M6 - Delivery Audit & Signoff\nLabels: backend,qa,testing\n\n## GitFlow Branch\n- feature/C0-02-backend-live-contract\n\n## Goal\nRun live contract checks (non-mocked) for required backend routes and capture evidence.\n\n## Functional Requirements\n- Validate endpoints:\n  - `GET /health`\n  - `POST /users/execute`\n  - `POST /users/clear`\n- Record status codes and payload shape.\n- Confirm error envelope format for a controlled failure case.\n\n## Non-Functional Requirements\n- Use deterministic commands and include exact outputs.\n- Do not expose secrets in evidence.\n\n## Acceptance Criteria\n- All three endpoints return expected success responses.\n- Error response follows `{ error: { code, message, details? } }`.\n\n## Deliverables / Evidence\n- Update `docs/evidence/M2-crypto.md` with:\n  - curl commands\n  - response payload samples\n  - notes for any environment assumptions\n\n"
    },
    {
      "path": ".github/issues/M2-04-japa-integration-tests-for-api.md",
      "content": "Title: Add Japa integration tests for /health, /users/execute, /users/clear\nMilestone: M2 - Crypto + Backend Use Cases\nLabels: backend,testing\n\n## GitFlow Branch\n- feature/M2-04-japa-tests\n\n## Goal\nAdd test coverage using Japa for the main backend endpoints.\n\n## Functional Requirements\n- Add tests:\n  - `/health` 200\n  - `/users/execute` success path using mocked secure endpoint + mocked n8n webhook\n  - `/users/clear` success path with mocked n8n webhook\n\n## Non-Functional Requirements\n- Tests must be deterministic (no reliance on real external services)\n\n## Acceptance Criteria\n- `bun run test` passes from repo root\n\n## Deliverables / Evidence\n- `docs/evidence/M2-crypto.md` includes test output\n"
    },
    {
      "path": ".github/issues/M3-02-frontend-api-integration-execute-clear.md",
      "content": "Title: Integrate frontend with backend API for execute and clear flows\nMilestone: M3 - Frontend UX + Integration\nLabels: frontend,testing\n\n## GitFlow Branch\n- feature/M3-02-frontend-api\n\n## Goal\nWire the UI buttons to backend API endpoints and update table state.\n\n## Functional Requirements\n- On \"Executar\":\n  - call backend `POST /users/execute`\n  - render returned users in table\n- On \"Limpar\":\n  - call backend `POST /users/clear`\n  - clear UI table immediately after success\n- Add loading and error states.\n\n## Non-Functional Requirements\n- Avoid UI flicker; disable button while loading.\n- Handle backend error payload consistently.\n\n## Acceptance Criteria\n- Clicking \"Executar\" populates table dynamically.\n- Clicking \"Limpar\" clears table dynamically (no reload).\n\n## Deliverables / Evidence\n- `docs/evidence/M3-ui.md` includes a short E2E checklist and outputs\n"
    },
    {
      "path": ".github/issues/C0-13-production-smoke-dns-hardening.md",
      "content": "Title: Add production smoke script with DNS/CORS/webhook diagnostics and final runbook hardening\nMilestone: C0 - Final Hardening\nLabels: qa,deploy,docs,backend,frontend,workflows\n\n## GitFlow Branch\n- feature/C0-13-production-smoke-runbook\n\n## Goal\nProvide a deterministic production validation entrypoint that quickly identifies whether failures are in DNS, backend health, n8n webhook registration, or frontend/backend env alignment.\n\n## Functional Requirements\n- Add `scripts/prod-smoke.sh` to validate:\n  - backend `/health`\n  - backend `/users/execute`\n  - backend `/users/clear`\n  - optional backend `/users/seed`\n  - n8n webhooks `ingest/list/clear`\n- Script must print actionable diagnosis for:\n  - DNS failures\n  - `404 webhook not registered`\n  - `502 Application failed to respond`\n  - missing `/users/seed` route on outdated backend deploys\n- Add root script alias `bun run smoke:prod`.\n- Update deploy docs with exact copy/paste usage.\n\n## Non-Functional Requirements\n- No secrets in repository.\n- Script should rely only on env vars.\n- Output must be concise and readable.\n\n## Acceptance Criteria\n- Running `BACKEND_URL=... N8N_BASE_URL=... bun run smoke:prod` executes full smoke flow.\n- Docs clearly explain required variables and expected outcomes.\n- Evidence file updated with production validation checklist.\n\n## Deliverables / Evidence\n- `scripts/prod-smoke.sh`\n- `package.json` (`smoke:prod` script)\n- `docs/deploy.md` (new section)\n- `docs/evidence/M4-deploy.md` (validation checklist update)\n"
    },
    {
      "path": ".github/issues/C0-06-performance-smoke-and-time-budget-report.md",
      "content": "Title: Add performance smoke report for execute and clear flows with response-time budget\nMilestone: M6 - Delivery Audit & Signoff\nLabels: backend,frontend,qa,performance\n\n## GitFlow Branch\n- feature/C0-06-performance-smoke\n\n## Goal\nProvide lightweight performance evidence aligned with evaluation criteria.\n\n## Functional Requirements\n- Measure latency for:\n  - backend `POST /users/execute`\n  - backend `POST /users/clear`\n  - frontend click-to-render for execute/clear (manual stopwatch acceptable with method noted)\n- Document results and acceptable budget thresholds.\n\n## Non-Functional Requirements\n- Keep method simple and reproducible.\n- Include environment constraints in interpretation.\n\n## Acceptance Criteria\n- Report contains measured numbers and command/method used.\n- No unexplained outlier remains undocumented.\n\n## Deliverables / Evidence\n- `docs/evidence/C0-performance.md`\n\n"
    },
    {
      "path": ".github/issues/M2-02-secure-endpoint-fetch-and-decrypt-aes-256-gcm.md",
      "content": "Title: Fetch secure endpoint and decrypt AES-256-GCM payload (unit tested)\nMilestone: M2 - Crypto + Backend Use Cases\nLabels: backend,security,testing\n\n## GitFlow Branch\n- feature/M2-02-aes-gcm-decrypt\n\n## Goal\nImplement AES-256-GCM decryption logic to transform encrypted data into user records.\n\n## Functional Requirements\n- Implement a `SecureEndpointClient` that fetches the secure endpoint URL.\n- Implement `Aes256GcmDecryptor` that:\n  - reads ciphertext + IV + authTag + key from payload (format may be provided by endpoint)\n  - returns decrypted JSON user list\n- Add unit tests with a fixed fixture (do not depend on the live endpoint for unit tests)\n\n## Non-Functional Requirements\n- Fail closed: any crypto error must return a safe error.\n- No secrets hardcoded.\n\n## Acceptance Criteria\n- Unit tests validate decryptor output for fixture.\n- Live mode can decrypt from endpoint (manual evidence).\n\n## Deliverables / Evidence\n- `docs/evidence/M2-crypto.md` includes:\n  - sample (redacted) payload shape\n  - curl of secure endpoint (redacted secrets)\n  - proof of decrypted result count\n"
    },
    {
      "path": ".github/issues/M4-05-vercel-build-deploy-automation.md",
      "content": "Title: Configure Vercel deploy with frontend build and GitHub Actions automation\nMilestone: M4 - Deploy + Evidence Pack\nLabels: deploy,frontend,docs,qa\n\n## GitFlow Branch\n- feature/M4-05-vercel-build-deploy-pipeline\n\n## Goal\nEnable reproducible Vercel deployment flow with explicit frontend build validation and GitHub Actions automation.\n\n## Functional Requirements\n- Add frontend build validation to CI quality workflow.\n- Add GitHub Actions workflow for Vercel:\n  - preview deploy on PR\n  - production deploy on `main`\n- Document required Vercel/GitHub secrets and setup sequence.\n- Update deploy evidence template with CI and Vercel proof placeholders.\n\n## Non-Functional Requirements\n- Bun-first commands only.\n- No secrets committed.\n- Linux/WSL docs remain reproducible.\n\n## Acceptance Criteria\n- CI includes frontend build step.\n- Vercel workflow file exists and is gated by required secrets.\n- Documentation includes click-by-click setup and smoke checks.\n\n## Deliverables / Evidence\n- `.github/workflows/ci.yml`\n- `.github/workflows/vercel-deploy.yml`\n- `docs/deploy.md`\n- `README.md`\n- `docs/evidence/M4-deploy.md`\n"
    }
  ]
}